<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#ddd">
<meta name="generator" content="Hexo 6.0.0">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#ddd">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-X7rrn44l1+AUO65h1LGALBbOc5C5bOstSYsNlv9MhT8=" crossorigin="anonymous">
  <link rel="stylesheet" href="/lib/@fancyapps/fancybox/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.imssyang.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"right","width":300,"display":"hide","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"rgba(255, 255, 255, 0.1)","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Disqus","order":-1},"gitalk":{"text":"Github","order":-2}}},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":3,"unescape":true,"preload":true}}</script><script src="/js/config.js"></script>
<meta name="description" content="Python基础语法梳理，主要涉及语言本身的数据模型、提升表达力的结构、语言上的术语，关注语言层面的改进点以及演化过程。">
<meta property="og:type" content="article">
<meta property="og:title" content="Python基础">
<meta property="og:url" content="https://blog.imssyang.com/ProgrammingLanguage/Python/Basic.html">
<meta property="og:site_name" content="Just Do It">
<meta property="og:description" content="Python基础语法梳理，主要涉及语言本身的数据模型、提升表达力的结构、语言上的术语，关注语言层面的改进点以及演化过程。">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-12-20T08:09:22.000Z">
<meta property="article:modified_time" content="2022-02-03T07:08:30.000Z">
<meta property="article:author" content="Ssyang">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.imssyang.com/ProgrammingLanguage/Python/Basic.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://blog.imssyang.com/ProgrammingLanguage/Python/Basic.html","path":"ProgrammingLanguage/Python/Basic.html","title":"Python基础"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Python基础 | Just Do It</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Just Do It</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">by Ssyang</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%EF%BC%88data-model%EF%BC%89"><span class="nav-number">1.</span> <span class="nav-text">数据模型（data model）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88data-type%EF%BC%89"><span class="nav-number">1.1.</span> <span class="nav-text">数据类型（data type）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#None"><span class="nav-number">1.1.1.</span> <span class="nav-text">None</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bytes"><span class="nav-number">1.1.2.</span> <span class="nav-text">bytes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bool"><span class="nav-number">1.1.3.</span> <span class="nav-text">bool</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#enum"><span class="nav-number">1.1.4.</span> <span class="nav-text">enum</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#number"><span class="nav-number">1.1.5.</span> <span class="nav-text">number</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#set"><span class="nav-number">1.1.6.</span> <span class="nav-text">set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#string"><span class="nav-number">1.1.7.</span> <span class="nav-text">string</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#list"><span class="nav-number">1.1.8.</span> <span class="nav-text">list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dictionary"><span class="nav-number">1.1.9.</span> <span class="nav-text">dictionary</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95"><span class="nav-number">1.2.</span> <span class="nav-text">特殊方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#str"><span class="nav-number">1.2.1.</span> <span class="nav-text">__str__</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iter"><span class="nav-number">1.2.2.</span> <span class="nav-text">__iter__</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Build-in-Functions"><span class="nav-number">1.3.</span> <span class="nav-text">Build-in Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#enumerate"><span class="nav-number">1.3.1.</span> <span class="nav-text">enumerate()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#isinstance"><span class="nav-number">1.3.2.</span> <span class="nav-text">isinstance()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#len"><span class="nav-number">1.3.3.</span> <span class="nav-text">len()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sum"><span class="nav-number">1.3.4.</span> <span class="nav-text">sum()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zip"><span class="nav-number">1.3.5.</span> <span class="nav-text">zip()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scope-of-Variables"><span class="nav-number">1.4.</span> <span class="nav-text">Scope of Variables</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Method-resolution-order-MRO"><span class="nav-number">1.5.</span> <span class="nav-text">Method resolution order (MRO)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="nav-number">1.6.</span> <span class="nav-text">权限控制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-number">1.7.</span> <span class="nav-text">函数参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#positional-vs-keyword"><span class="nav-number">1.7.1.</span> <span class="nav-text">positional vs keyword</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#argument-vs-parameter"><span class="nav-number">1.7.2.</span> <span class="nav-text">argument vs parameter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#default-parameter"><span class="nav-number">1.7.3.</span> <span class="nav-text">default parameter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lambda-expression"><span class="nav-number">1.7.4.</span> <span class="nav-text">lambda expression</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#annotations"><span class="nav-number">1.7.5.</span> <span class="nav-text">annotations</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BF%AE%E9%A5%B0%E5%99%A8%EF%BC%88decorator%EF%BC%89"><span class="nav-number">2.</span> <span class="nav-text">修饰器（decorator）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#staticmethod-vs-classmethod"><span class="nav-number">2.1.</span> <span class="nav-text">@staticmethod vs @classmethod</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#abstractmethod"><span class="nav-number">2.2.</span> <span class="nav-text">@abstractmethod</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#property"><span class="nav-number">2.3.</span> <span class="nav-text">@property</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#contextmanager"><span class="nav-number">2.4.</span> <span class="nav-text">@contextmanager</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84"><span class="nav-number">3.</span> <span class="nav-text">语法结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#if-%E2%80%A6-else"><span class="nav-number">3.1.</span> <span class="nav-text">if … else</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for-%E2%80%A6-else"><span class="nav-number">3.2.</span> <span class="nav-text">for … else</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#with%E8%AF%AD%E5%8F%A5"><span class="nav-number">3.3.</span> <span class="nav-text">with语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#async-with%E8%AF%AD%E5%8F%A5"><span class="nav-number">3.3.1.</span> <span class="nav-text">async with语句</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B5%8B%E5%80%BC%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%88Assignment%EF%BC%89"><span class="nav-number">3.4.</span> <span class="nav-text">赋值表达式（Assignment）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#match%E8%AF%AD%E5%8F%A5"><span class="nav-number">3.5.</span> <span class="nav-text">match语句</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%EF%BC%88module"><span class="nav-number">4.</span> <span class="nav-text">模块（module)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E6%90%9C%E7%B4%A2%E8%B7%AF%E5%BE%84"><span class="nav-number">4.1.</span> <span class="nav-text">模块搜索路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E7%BC%93%E5%AD%98%E7%9B%AE%E5%BD%95"><span class="nav-number">4.2.</span> <span class="nav-text">模块缓存目录</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8C%85%EF%BC%88package%EF%BC%89"><span class="nav-number">5.</span> <span class="nav-text">包（package）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#init-py"><span class="nav-number">5.1.</span> <span class="nav-text">__init__.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#main-py"><span class="nav-number">5.2.</span> <span class="nav-text">__main__.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pip%E5%B7%A5%E5%85%B7"><span class="nav-number">5.3.</span> <span class="nav-text">pip工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pyproject-toml"><span class="nav-number">5.3.1.</span> <span class="nav-text">pyproject.toml</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%EF%BC%88Exception"><span class="nav-number">6.</span> <span class="nav-text">异常（Exception)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#raise%E2%80%A6from"><span class="nav-number">6.1.</span> <span class="nav-text">raise…from</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#try%E2%80%A6except%E2%80%A6else"><span class="nav-number">6.2.</span> <span class="nav-text">try…except…else</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#try%E2%80%A6finally"><span class="nav-number">6.3.</span> <span class="nav-text">try…finally</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#assert"><span class="nav-number">6.4.</span> <span class="nav-text">assert</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B0%83%E8%AF%95%EF%BC%88Debugger%EF%BC%89"><span class="nav-number">7.</span> <span class="nav-text">调试（Debugger）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9B%E5%85%A5"><span class="nav-number">7.1.</span> <span class="nav-text">进入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4"><span class="nav-number">7.2.</span> <span class="nav-text">命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">8.</span> <span class="nav-text">参考</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ssyang"
      src="/images/imssyang/windmill.png">
  <p class="site-author-name" itemprop="name">Ssyang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/imssyang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;imssyang" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imssyang@gmail.com" title="E-Mail → mailto:imssyang@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/lib/@creativecommons/vocabulary/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.dabeaz.com/" title="https:&#x2F;&#x2F;www.dabeaz.com" rel="noopener" target="_blank">David Beazley</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://coldattic.info/" title="http:&#x2F;&#x2F;coldattic.info" rel="noopener" target="_blank">A Foo Walks into a Bar...</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.brendangregg.com/" title="https:&#x2F;&#x2F;www.brendangregg.com" rel="noopener" target="_blank">Brendan Gregg's Homepage</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.wowza.com/blog" title="https:&#x2F;&#x2F;www.wowza.com&#x2F;blog" rel="noopener" target="_blank">WOWZA Media Systems</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://preshing.com/" title="https:&#x2F;&#x2F;preshing.com" rel="noopener" target="_blank">Preshing on Programming</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.yinwang.org/" title="https:&#x2F;&#x2F;www.yinwang.org" rel="noopener" target="_blank">当然我在扯淡</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.jianchihu.net/" title="https:&#x2F;&#x2F;blog.jianchihu.net" rel="noopener" target="_blank">剑痴乎</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://betterexplained.com/" title="https:&#x2F;&#x2F;betterexplained.com" rel="noopener" target="_blank">Better Explained</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.mathsisfun.com/" title="https:&#x2F;&#x2F;www.mathsisfun.com" rel="noopener" target="_blank">Math is Fun</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://notes.shichao.io/" title="https:&#x2F;&#x2F;notes.shichao.io" rel="noopener" target="_blank">Shichao's Notes</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.shuxuele.com/" title="https:&#x2F;&#x2F;www.shuxuele.com" rel="noopener" target="_blank">数学乐</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://thispointer.com/" title="https:&#x2F;&#x2F;thispointer.com" rel="noopener" target="_blank">thisPointer</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://refactoring.guru/" title="https:&#x2F;&#x2F;refactoring.guru" rel="noopener" target="_blank">Refactoring.Guru</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.imssyang.com/ProgrammingLanguage/Python/Basic.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/imssyang/windmill.png">
      <meta itemprop="name" content="Ssyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just Do It">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Python基础
            <div class="post-categories">
              [
                  <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                    <a href="/categories/ProgrammingLanguage/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                  </span>
              ]
            </div>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 12/20/2021 16:09:22" itemprop="dateCreated datePublished" datetime="2021-12-20T16:09:22+08:00">12/20/2021</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2/3/2022 15:08:30" itemprop="dateModified" datetime="2022-02-03T15:08:30+08:00">2/3/2022</time>
    </span>

  
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>40k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>36 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Python基础语法梳理，主要涉及语言本身的数据模型、提升表达力的结构、语言上的术语，关注语言层面的改进点以及演化过程。</p>
<span id="more"></span>

<h1 id="数据模型（data-model）"><a href="#数据模型（data-model）" class="headerlink" title="数据模型（data model）"></a>数据模型（data model）</h1><ul>
<li>object 所有数据都是基于对象的。Function是first-class对象，可以被变量引用、增加到list中、作为参数传递。<ul>
<li>identity 对象的唯一标识：用<code>is</code>操作符比较，用<code>id()</code>函数获取整型值。<ul>
<li>type 类型（不可更改）：用<code>type()</code>函数获取类型<ul>
<li>None ：False</li>
<li>NotImplemented ：True</li>
<li>Ellipsis ：通过<code>...</code>访问，判断时为True</li>
<li>numbers.Number<ul>
<li>Integral<ul>
<li>int</li>
<li>bool</li>
</ul>
</li>
<li>float</li>
<li>complex</li>
</ul>
</li>
<li>Sequences ：[0,n)索引的有序集合，<code>len()</code>返回数量，<code>in/not in</code>操作检查序列中是否包含某值<ul>
<li>immutable<ul>
<li>string ：只支持Unicode码点，<code>ord()/chr()</code>将码点在字符串和整形间转换，<code>str.encode()/bytes.decode()</code>指定编码的字符串与Byte间互转</li>
<li>tuple</li>
<li>byte ：8bit的数组</li>
</ul>
</li>
<li>mutable<ul>
<li>list</li>
<li>bytearray()</li>
</ul>
</li>
</ul>
</li>
<li>Set : 无序、有限的不可变对象集合，<code>len()</code>返回数量<ul>
<li>set()</li>
<li>frozenset()</li>
</ul>
</li>
<li>Mappings ：<code>len()</code>返回数量<ul>
<li><a href="#dictionary">dict()</a></li>
</ul>
</li>
<li>Callable ：函数可调用的<ul>
<li>User-defined:<ul>
<li><code>__name__</code> ：函数名称</li>
<li><code>__qualname__</code> ：函数限定名称</li>
<li><code>__module__</code> ：模块名称</li>
</ul>
</li>
<li>Instance.Method<ul>
<li><code>__self__</code> : 类实例对象</li>
<li><code>__func__</code> : 函数对象</li>
<li><code>__doc__</code> : 方法的文档</li>
<li><code>__name__</code> : 方法名</li>
<li><code>__module__</code> : 定义方法的模块名</li>
</ul>
</li>
<li>GeneratorFunction ：用<code>yield</code>语句的函数或方法<ul>
<li><code>iterator.__next__</code> 启动执行的方法</li>
<li>return后<code>raise StopIteration</code></li>
</ul>
</li>
<li>CoroutineFunction ：用<code>async def</code>定义的函数或方法<ul>
<li>返回一个coroutine对象</li>
<li>可包涵<code>await/async with/async for</code>语句</li>
</ul>
</li>
<li>Built-in Function:<ul>
<li>len()</li>
<li>math.sin()</li>
</ul>
</li>
<li>Built-in method: 内置函数的伪装<ul>
<li>list_object.append()</li>
</ul>
</li>
<li>Classes : 类对象是callable<ul>
<li><code>__new__()</code></li>
<li><code>__init__()</code></li>
</ul>
</li>
<li>ClassInstance: 任何类定义 <code>__call__()</code>后都是callable</li>
</ul>
</li>
<li>Module ：通过<code>import</code>语句导入<ul>
<li><code>__dict__</code> : 模块的名称空间，<code>m.x</code>等价于<code>m.__dict__[&quot;x&quot;]</code></li>
<li><code>__file__</code> : 模块被载入的文件路径</li>
</ul>
</li>
<li>Class instance:<ul>
<li><code>__class__</code> : 实例的类</li>
<li><code>__dict__</code> ：属性字典</li>
<li><code>__getattr__</code> ：定义后，代替直接读<code>__dict__</code></li>
<li><code>__setattr__</code> ：定义后，代替直接写<code>__dict__</code></li>
</ul>
</li>
<li>I&#x2F;O objects:<ul>
<li>open()</li>
<li>os.popen()</li>
<li>os.fdopen()</li>
<li>os.makefile()</li>
</ul>
</li>
<li>Internal-type<ul>
<li>bytecode</li>
<li>frame-object</li>
<li>traceback-object</li>
<li>slice-object<ul>
<li><code>__getitem__()</code></li>
<li><code>slice()</code></li>
</ul>
</li>
<li>staticmethod-object :<ul>
<li>@staticmethod修饰后，通过内建staticmethod()创建</li>
<li>可通过object或class访问，支持override</li>
</ul>
</li>
<li>classmethod-object :<ul>
<li>@classmethod修饰后，通过内建classmethod()创建</li>
<li>只能通过class访问</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>value 值：可变时为<code>mutable</code>对象，不可变时为<code>immutable</code>对象<ul>
<li>immutable<ul>
<li>instance</li>
<li>number</li>
<li>string</li>
<li>tuple<ul>
<li>不可变对象的新值引用到任何已存在的不可变对象，因此<code>a=1; b=1</code>中a和b不一定引用同一个对象。</li>
</ul>
</li>
</ul>
</li>
<li>mutable<ul>
<li>dict</li>
<li>list<ul>
<li>可变对象的新值一定是新创建的对象，因此<code>c=[]; d=[]</code>中c和d一定是两个新创建的对象。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>garbage-collector<ul>
<li>reference-counting 引用计数方式<ul>
<li>delayed detection of cyclically linked garbage 延迟检测循环链接</li>
</ul>
</li>
<li>不保证释放外部资源，比如file&#x2F;socket等，需通过<code>try ... finally</code>或<code>with ...</code>表达式手动释放</li>
</ul>
</li>
</ul>
<h2 id="数据类型（data-type）"><a href="#数据类型（data-type）" class="headerlink" title="数据类型（data type）"></a>数据类型（data type）</h2><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/stdtypes.html">Built-in Types</a></p>
<h3 id="None"><a href="#None" class="headerlink" title="None"></a>None</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="literal">None</span>)) <span class="comment"># &lt;class &#x27;NoneType&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(<span class="literal">None</span>))  <span class="comment"># None</span></span><br></pre></td></tr></table></figure>

<h3 id="bytes"><a href="#bytes" class="headerlink" title="bytes"></a>bytes</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ab\tc&#x27;</span>)  <span class="comment"># ab    c</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">b&#x27;ab\tc&#x27;</span>) <span class="comment"># b&#x27;ab\tc&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">b&#x27;ab\tc&#x27;</span>.decode(<span class="string">&#x27;utf-8&#x27;</span>)) <span class="comment"># ab    c</span></span><br></pre></td></tr></table></figure>

<h3 id="bool"><a href="#bool" class="headerlink" title="bool"></a>bool</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># False</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">bool</span>([])</span><br><span class="line"><span class="built_in">bool</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="keyword">not</span> <span class="literal">None</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="string">&#x27;&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;aaa&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h3><p><a target="_blank" rel="noopener" href="https://zetcode.com/python/enum/">Python enum</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/12680080/python-enums-with-attributes">python enums with attributes</a></p>
<ul>
<li>Python3.4 引入枚举类型</li>
</ul>
<div class="tabs" id="enum"><ul class="nav-tabs"><li class="tab active"><a href="#enum-1">Enum</a></li><li class="tab"><a href="#enum-2">EnumMeta</a></li></ul><div class="tab-content"><div class="tab-pane active" id="enum-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>(<span class="title class_ inherited__">Enum</span>):</span><br><span class="line">    dog = <span class="number">1</span></span><br><span class="line">    cat = <span class="string">&quot;two&quot;</span></span><br><span class="line">    cow = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Animal.dog)                        <span class="comment"># Animal.dog</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog.name, Animal.dog.value) <span class="comment"># dog 1</span></span><br><span class="line"><span class="built_in">print</span>(Animal[<span class="string">&quot;dog&quot;</span>], Animal(<span class="number">1</span>))          <span class="comment"># Animal.dog Animal.dog</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog <span class="keyword">is</span> Animal.cat)          <span class="comment"># False</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog != Animal.cat)          <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog <span class="keyword">in</span> Animal)              <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Animal:</span><br><span class="line">    <span class="built_in">print</span>(i.name)                        <span class="comment"># dog cat cow</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="enum-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum, EnumMeta</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AnimalMeta</span>(<span class="title class_ inherited__">EnumMeta</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__contains__</span>(<span class="params">cls, item</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(item, <span class="built_in">str</span>):</span><br><span class="line">            <span class="keyword">return</span> item <span class="keyword">in</span> [v.value <span class="keyword">for</span> v <span class="keyword">in</span> cls.__members__.values()]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> EnumMeta.__contains__(cls, item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>(Enum, metaclass=AnimalMeta):</span><br><span class="line">    dog = <span class="string">&quot;one&quot;</span></span><br><span class="line">    cat = <span class="string">&quot;two&quot;</span></span><br><span class="line">    cow = <span class="string">&quot;three&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__hash__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">hash</span>((self.value,))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="keyword">return</span> item == self.value</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">can_woof</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span> <span class="keyword">if</span> self == self.dog <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">init</span>(<span class="params">value</span>):</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> Animal:</span><br><span class="line">            <span class="keyword">if</span> item.value == value:</span><br><span class="line">                <span class="keyword">return</span> item</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">f&quot;illegal value: <span class="subst">&#123;value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Animal.dog)                        <span class="comment"># one (__str__)</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog.name, Animal.dog.value) <span class="comment"># dog one</span></span><br><span class="line"><span class="built_in">print</span>(Animal[<span class="string">&quot;dog&quot;</span>], Animal(<span class="string">&quot;one&quot;</span>))      <span class="comment"># one one</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog <span class="keyword">is</span> Animal.cat)          <span class="comment"># False</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog != Animal.cat)          <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog == <span class="string">&quot;one&quot;</span>)               <span class="comment"># True (__eq__)</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog <span class="keyword">in</span> Animal)              <span class="comment"># True (__contains__)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;one&quot;</span> <span class="keyword">in</span> Animal)                   <span class="comment"># True (__contains__)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;sss&quot;</span> <span class="keyword">in</span> Animal)                   <span class="comment"># False (__contains__)</span></span><br><span class="line"><span class="built_in">print</span>(Animal.dog.can_woof)               <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(Animal.cat.can_woof)               <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">animal = Animal.init(<span class="string">&quot;one&quot;</span>)</span><br><span class="line">animals = <span class="built_in">dict</span>()</span><br><span class="line">animals[animal] = <span class="string">&quot;1&quot;</span>                    <span class="comment"># &#x27;as key&#x27; (__hash__)</span></span><br><span class="line"><span class="built_in">print</span>(animal, animal.name, <span class="built_in">type</span>(animal)) <span class="comment"># one dog &lt;enum &#x27;Animal&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(animals)                           <span class="comment"># &#123;&lt;Animal.dog: &#x27;one&#x27;&gt;: &#x27;1&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Animal:</span><br><span class="line">    <span class="built_in">print</span>(i, i.name)                     <span class="comment"># one dog / two cat / three cow</span></span><br></pre></td></tr></table></figure></div></div></div>

<h3 id="number"><a href="#number" class="headerlink" title="number"></a>number</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/c-api/long.html#integer-objects">Integer Objects</a><br><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/exceptions.html#OverflowError">exception OverflowError</a><br><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/sys.html#sys.maxsize">sys.maxsize</a><br><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/sys.html#sys.float_info">sys.float_info</a></p>
<ul>
<li>整型对象：Python3中的实现中会自动扩展内存，因此通常不会出现溢出（只有某些历史原因或内存错误时抛出）</li>
<li>浮点型对象：Python3中的实现中存在固定的内存限制</li>
</ul>
<div class="tabs" id="string"><ul class="nav-tabs"><li class="tab active"><a href="#string-1">max</a></li><li class="tab"><a href="#string-2">overflow after implicit conversion</a></li><li class="tab"><a href="#string-3">format</a></li></ul><div class="tab-content"><div class="tab-pane active" id="string-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">i = sys.maxsize</span><br><span class="line"><span class="built_in">print</span>(i)          <span class="comment"># 9223372036854775807</span></span><br><span class="line"><span class="built_in">print</span>(i == i + <span class="number">1</span>) <span class="comment"># False</span></span><br><span class="line">i += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(i)          <span class="comment"># 9223372036854775808</span></span><br><span class="line"></span><br><span class="line">f = sys.float_info.<span class="built_in">max</span></span><br><span class="line"><span class="built_in">print</span>(f)          <span class="comment"># 1.7976931348623157e+308</span></span><br><span class="line"><span class="built_in">print</span>(f == f + <span class="number">1</span>) <span class="comment"># True</span></span><br><span class="line">f += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(f)          <span class="comment"># 1.7976931348623157e+308</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="string-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([<span class="number">3095693933</span>], dtype=<span class="built_in">int</span>)</span><br><span class="line">s = np.<span class="built_in">sum</span>(a)</span><br><span class="line"><span class="built_in">print</span>(s)          <span class="comment"># 3095693933</span></span><br><span class="line">s *= s            <span class="comment"># -8863423146896543127</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(s))    <span class="comment"># numpy.int64</span></span><br><span class="line">py_s = <span class="built_in">int</span>(s)</span><br><span class="line">py_s *= py_s      <span class="comment"># 9583320926813008489</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="string-3"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">0.1000000</span></span><br><span class="line">b = <span class="number">0.0000321</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span>&quot;</span>)     <span class="comment"># 0.1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;b&#125;</span>&quot;</span>)     <span class="comment"># 3.21e-05</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;b:<span class="number">.5</span>f&#125;</span>&quot;</span>) <span class="comment"># 0.00003</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;b:<span class="number">.6</span>f&#125;</span>&quot;</span>) <span class="comment"># 0.000032</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">7</span>/<span class="number">2</span>, <span class="built_in">type</span>(<span class="number">7</span>/<span class="number">2</span>))   <span class="comment"># 3.5 &lt;class &#x27;float&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">7</span>//<span class="number">2</span>, <span class="built_in">type</span>(<span class="number">7</span>//<span class="number">2</span>)) <span class="comment"># 3   &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">float</span>(<span class="string">&#x27;0.12&#x27;</span>))    <span class="comment"># 0.12</span></span><br></pre></td></tr></table></figure></div></div></div>

<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><p><a target="_blank" rel="noopener" href="https://www.programiz.com/python-programming/set">Python Sets</a></p>
<ul>
<li>集合是未排序的（unordered）</li>
<li>集合中的元素是唯一（unique）且不可变的（immutable），而集合本身是可变的（mutable）<ul>
<li>list或dict是可变的，不可作为集合元素</li>
<li>集合不可包含重复元素，每个元素都是唯一的</li>
</ul>
</li>
<li>集合通过内建函数<code>set()</code>创建，字面量以<code>&#123;1，&#39;2&#39;, (3, 4)&#125;</code>形式表示</li>
</ul>
<div class="tabs" id="python-set"><ul class="nav-tabs"><li class="tab active"><a href="#python-set-1">basic</a></li><li class="tab"><a href="#python-set-2">union</a></li><li class="tab"><a href="#python-set-3">intersection</a></li><li class="tab"><a href="#python-set-4">difference</a></li><li class="tab"><a href="#python-set-5">symmetric-difference</a></li></ul><div class="tab-content"><div class="tab-pane active" id="python-set-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Init</span></span><br><span class="line">s = &#123;<span class="number">1</span>, <span class="number">3</span>&#125;                <span class="comment"># s = &#123;1, 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Add</span></span><br><span class="line">s.add(<span class="number">2</span>)                  <span class="comment"># s = &#123;1, 2, 3&#125;          add element</span></span><br><span class="line">s.update([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);      <span class="comment"># s = &#123;1, 2, 3, 4&#125;       add list</span></span><br><span class="line">s.update([<span class="number">4</span>, <span class="number">5</span>], &#123;<span class="number">1</span>, <span class="number">6</span>&#125;); <span class="comment"># s = &#123;1, 2, 3, 4, 5, 6&#125; add list and set</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Delete</span></span><br><span class="line">s.discard(<span class="number">4</span>)              <span class="comment"># s = &#123;1, 2, 3, 5, 6&#125;    discard element</span></span><br><span class="line">s.discard(<span class="number">8</span>)              <span class="comment"># s = &#123;1, 2, 3, 5, 6&#125;    discard not-exist element</span></span><br><span class="line">s.remove(<span class="number">3</span>)               <span class="comment"># s = &#123;1, 2, 5, 6&#125;       remove element</span></span><br><span class="line"><span class="comment">#s.remove(8)              # KeyError               remove not-exist element</span></span><br><span class="line">e = s.pop()               <span class="comment"># s = &#123;2, 5, 6&#125;, e = 1   pop element</span></span><br><span class="line">s.clear()                 <span class="comment"># s = set()              empty set</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Other</span></span><br><span class="line"><span class="built_in">print</span>(&#123;<span class="number">1</span>, <span class="string">&#x27;2&#x27;</span>, (<span class="number">3</span>, <span class="number">4</span>)&#125;)   <span class="comment"># &#123;1, (3, 4), &#x27;2&#x27;&#125;</span></span><br><span class="line"><span class="built_in">print</span>(&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>&#125;) <span class="comment"># &#123;1, 2, 3, 4&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>())              <span class="comment"># (empty set)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>]))  <span class="comment"># &#123;1, 2, 3&#125; (from list)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span> <span class="keyword">in</span> &#123;<span class="number">1</span>, <span class="number">2</span>&#125;)        <span class="comment"># True</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="python-set-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">B = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(A | B)      <span class="comment"># &#123;1, 2, 3, 4&#125;</span></span><br><span class="line"><span class="built_in">print</span>(A.union(B)) <span class="comment"># &#123;1, 2, 3, 4&#125;</span></span><br><span class="line"><span class="built_in">print</span>(B.union(A)) <span class="comment"># &#123;1, 2, 3, 4&#125;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="python-set-3"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">B = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(A &amp; B)             <span class="comment"># &#123;2, 3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(A.intersection(B)) <span class="comment"># &#123;2, 3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(B.intersection(A)) <span class="comment"># &#123;2, 3&#125;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="python-set-4"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">B = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(A - B)           <span class="comment"># &#123;1&#125;</span></span><br><span class="line"><span class="built_in">print</span>(A.difference(B)) <span class="comment"># &#123;1&#125;</span></span><br><span class="line"><span class="built_in">print</span>(B.difference(A)) <span class="comment"># &#123;4&#125;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="python-set-5"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">B = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(A ^ B)                     <span class="comment"># &#123;1, 4&#125;</span></span><br><span class="line"><span class="built_in">print</span>(A.symmetric_difference(B)) <span class="comment"># &#123;1, 4&#125;</span></span><br><span class="line"><span class="built_in">print</span>(B.symmetric_difference(A)) <span class="comment"># &#123;1, 4&#125;</span></span><br></pre></td></tr></table></figure></div></div></div>

<h3 id="string"><a href="#string" class="headerlink" title="string"></a>string</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/stdtypes.html#old-string-formatting">Python Docs: “printf-style String Formatting</a></p>
<ul>
<li><code>%s</code>: 使用<a target="_blank" rel="noopener" href="https://docs.python.org/3/library/stdtypes.html#str">str()</a>将对象转成字符串</li>
<li><code>%r</code>: 使用<a target="_blank" rel="noopener" href="https://docs.python.org/3/library/functions.html#repr">repr()</a>将对象转成字符串（raw data格式，用于debug环境）</li>
<li><code>%d</code>: Signed integer decimal.</li>
</ul>
<div class="tabs" id="string"><ul class="nav-tabs"><li class="tab active"><a href="#string-1">basic</a></li><li class="tab"><a href="#string-2">extend</a></li></ul><div class="tab-content"><div class="tab-pane active" id="string-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># substring</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;abcde&#x27;</span>[<span class="number">1</span>:])  <span class="comment"># bcde</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;abcde&#x27;</span>[:<span class="number">1</span>])  <span class="comment"># a</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;abcde&#x27;</span>[-<span class="number">1</span>:]) <span class="comment"># e</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;abcde&#x27;</span>[:-<span class="number">1</span>]) <span class="comment"># abcd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># format</span></span><br><span class="line">name = <span class="string">&#x27;Bob&#x27;</span></span><br><span class="line">errno = <span class="number">65535</span></span><br><span class="line"><span class="string">&#x27;Hello %s, 0x%x error!&#x27;</span> % (name, error) <span class="comment"># (python2) Hello Bob, 0xffff error!</span></span><br><span class="line"><span class="string">&#x27;Hey %(name)s, 0x%(errno)x error!&#x27;</span> \</span><br><span class="line">    % &#123;<span class="string">&#x27;name&#x27;</span>: name, <span class="string">&#x27;errno&#x27;</span>: errno &#125; <span class="comment"># (python2) Hey Bob, 0xffff error!</span></span><br><span class="line"><span class="string">&#x27;Hello &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;Bob&#x27;</span>) <span class="comment"># (python3)</span></span><br><span class="line"><span class="string">&#x27;Hey &#123;name&#125;, 0x&#123;errno:x&#125; error!&#x27;</span>.<span class="built_in">format</span>(name=name, errno=errno) <span class="comment"># (python3)</span></span><br><span class="line"><span class="string">f&#x27;Hello <span class="subst">&#123;name&#125;</span>, 0x<span class="subst">&#123;errno:x&#125;</span> error!&#x27;</span> <span class="comment"># (python3.6+)</span></span><br><span class="line"></span><br><span class="line">i = <span class="number">123</span>; <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i:05&#125;</span>&#x27;</span>) <span class="comment"># 00123</span></span><br><span class="line">f = <span class="number">123.456789</span>; <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;f:<span class="number">.5</span>&#125;</span>&quot;</span>) <span class="comment"># 123.46</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># set</span></span><br><span class="line">x = <span class="string">&quot;a&quot;</span></span><br><span class="line"><span class="built_in">print</span>(x <span class="keyword">in</span> &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;) <span class="comment"># True</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="string-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># str &amp; repr</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">d = datetime.date.today()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(d), <span class="string">&quot;%s&quot;</span> % d)   <span class="comment"># 2022-01-17 repeat</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">repr</span>(d), <span class="string">&quot;%r&quot;</span> % d)  <span class="comment"># datetime.date(2022, 1, 17) repeat</span></span><br></pre></td></tr></table></figure></div></div></div>

<h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/5125619/why-doesnt-list-have-safe-get-method-like-dictionary">Why doesn’t list have safe “get” method like dictionary?</a></p>
<ul>
<li>list是mutable对象，也是iterable对象</li>
</ul>
<div class="tabs" id="list"><ul class="nav-tabs"><li class="tab active"><a href="#list-1">basic</a></li><li class="tab"><a href="#list-2">extend</a></li></ul><div class="tab-content"><div class="tab-pane active" id="list-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create</span></span><br><span class="line">X = [<span class="string">&#x27;a&#x27;</span>, &#123;<span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">Y = [i*<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">4</span>)]  <span class="comment"># [2, 4, 6] (List Comprehension)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># slice</span></span><br><span class="line"><span class="built_in">print</span>(X[:], X[<span class="number">2</span>:], X[:<span class="number">1</span>])       <span class="comment"># [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;, &#x27;c&#x27;] [&#x27;c&#x27;] [&#x27;a&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(X[:-<span class="number">2</span>], X[-<span class="number">1</span>:], X[:-<span class="number">1</span>])   <span class="comment"># [&#x27;a&#x27;] [&#x27;c&#x27;] [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># add</span></span><br><span class="line">X.append(<span class="string">&#x27;e&#x27;</span>); <span class="built_in">print</span>(X)         <span class="comment"># [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;, &#x27;c&#x27;, &#x27;e&#x27;]</span></span><br><span class="line">X.append((<span class="number">6</span>,<span class="number">7</span>)); <span class="built_in">print</span>(X)       <span class="comment"># [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;, &#x27;c&#x27;, &#x27;e&#x27;, (6, 7)]</span></span><br><span class="line">X.extend((<span class="number">8</span>, <span class="number">9</span>)); <span class="built_in">print</span>(X)      <span class="comment"># [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;, &#x27;c&#x27;, &#x27;e&#x27;, (6, 7), 8, 9]</span></span><br><span class="line">X.insert(<span class="number">3</span>, <span class="string">&#x27;d&#x27;</span>); <span class="built_in">print</span>(X)      <span class="comment"># [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;, (6, 7), 8, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># remove</span></span><br><span class="line"><span class="keyword">del</span> X[<span class="number">3</span>]; <span class="built_in">print</span>(X)              <span class="comment"># [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;, &#x27;c&#x27;, &#x27;e&#x27;, (6, 7), 8, 9]</span></span><br><span class="line">e = X.pop(); <span class="built_in">print</span>(X, e)        <span class="comment"># [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;, &#x27;c&#x27;, &#x27;e&#x27;, (6, 7), 8] 9</span></span><br><span class="line">e = X.pop(<span class="number">2</span>); <span class="built_in">print</span>(X, e)       <span class="comment"># [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;, &#x27;e&#x27;, (6, 7), 8] c</span></span><br><span class="line">X.remove(<span class="string">&#x27;e&#x27;</span>); <span class="built_in">print</span>(X)         <span class="comment"># [&#x27;a&#x27;, &#123;&#x27;b&#x27;: 2&#125;, (6, 7), 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># modify</span></span><br><span class="line">X[<span class="number">0</span>] *= <span class="number">2</span>; <span class="built_in">print</span>(X)             <span class="comment"># [&#x27;aa&#x27;, &#123;&#x27;b&#x27;: 2&#125;, (6, 7), 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># access</span></span><br><span class="line"><span class="built_in">print</span>(X[<span class="number">1</span>], X[<span class="number">2</span>][<span class="number">1</span>], X[-<span class="number">1</span>])     <span class="comment"># &#123;&#x27;b&#x27;: 2&#125; 7 8</span></span><br><span class="line">L = []; <span class="built_in">print</span>(L[<span class="number">0</span>])             <span class="comment"># IndexError: list index out of range</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># index</span></span><br><span class="line">L = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]; <span class="built_in">print</span>(L.index(<span class="string">&#x27;b&#x27;</span>))  <span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sort</span></span><br><span class="line">L = [&#123;<span class="string">&quot;i&quot;</span>: <span class="number">3</span>&#125;, &#123;<span class="string">&quot;i&quot;</span>: <span class="number">1</span>&#125;, &#123;<span class="string">&quot;i&quot;</span>: <span class="number">2</span>&#125;]</span><br><span class="line">L.sort(key=<span class="keyword">lambda</span> item : item[<span class="string">&#x27;i&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(L)    <span class="comment"># [&#123;&#x27;i&#x27;: 1&#125;, &#123;&#x27;i&#x27;: 2&#125;, &#123;&#x27;i&#x27;: 3&#125;]</span></span><br><span class="line">L.sort(key=<span class="keyword">lambda</span> item : item[<span class="string">&#x27;i&#x27;</span>], reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(L)    <span class="comment"># [&#123;&#x27;i&#x27;: 3&#125;, &#123;&#x27;i&#x27;: 2&#125;, &#123;&#x27;i&#x27;: 1&#125;]</span></span><br><span class="line">S = <span class="built_in">sorted</span>(L, key=<span class="keyword">lambda</span> item : item[<span class="string">&#x27;i&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(L, S) <span class="comment"># [&#123;&#x27;i&#x27;: 3&#125;, &#123;&#x27;i&#x27;: 2&#125;, &#123;&#x27;i&#x27;: 1&#125;] [&#123;&#x27;i&#x27;: 1&#125;, &#123;&#x27;i&#x27;: 2&#125;, &#123;&#x27;i&#x27;: 3&#125;]</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="list-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dict as element</span></span><br><span class="line">D = &#123;<span class="number">1</span>: <span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line">L = []</span><br><span class="line">L.append(D); <span class="built_in">print</span>(L)           <span class="comment"># [&#123;1: &#x27;a&#x27;&#125;]</span></span><br><span class="line">D.update(&#123;<span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>&#125;); <span class="built_in">print</span>(L)    <span class="comment"># [&#123;1: &#x27;a&#x27;, 2: &#x27;b&#x27;&#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># remove when iterate</span></span><br><span class="line">L = [&#123;<span class="number">1</span>: <span class="string">&#x27;a&#x27;</span>&#125;, &#123;<span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>&#125;, &#123;<span class="number">3</span>: <span class="string">&#x27;c&#x27;</span>&#125;]</span><br><span class="line"><span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(L):</span><br><span class="line">    <span class="keyword">if</span> <span class="number">2</span> <span class="keyword">in</span> item:</span><br><span class="line">        L.pop(i)</span><br><span class="line"><span class="built_in">print</span>(L)                        <span class="comment"># [&#123;1: &#x27;a&#x27;&#125;, &#123;3: &#x27;c&#x27;&#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># iterate multi-list</span></span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">L1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line">L2 = [<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(itertools.chain(L1, L2)):</span><br><span class="line">    <span class="built_in">print</span>((i, item))   <span class="comment"># (0, &#x27;a&#x27;) (1, &#x27;b&#x27;) (2, &#x27;c&#x27;) (3, &#x27;d&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># iterate after reverse</span></span><br><span class="line">L = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">reversed</span>(L)):</span><br><span class="line">    <span class="built_in">print</span>((i, item))   <span class="comment"># (0, &#x27;c&#x27;) (1, &#x27;b&#x27;) (2, &#x27;a&#x27;)</span></span><br></pre></td></tr></table></figure></div></div></div>

<h3 id="dictionary"><a href="#dictionary" class="headerlink" title="dictionary"></a>dictionary</h3><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3975376/understanding-dict-copy-shallow-or-deep">Understanding dict.copy() - shallow or deep?</a></p>
<ul>
<li>dict是mutable对象，也是iterable对象</li>
</ul>
<div class="tabs" id="dictionary"><ul class="nav-tabs"><li class="tab active"><a href="#dictionary-1">basic</a></li><li class="tab"><a href="#dictionary-2">extend</a></li><li class="tab"><a href="#dictionary-3">key2attr</a></li><li class="tab"><a href="#dictionary-4">bad: AsParameter</a></li></ul><div class="tab-content"><div class="tab-pane active" id="dictionary-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># create</span></span><br><span class="line">d1 = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>: [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]&#125;</span><br><span class="line">d2 = <span class="built_in">dict</span>(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>&#125;)      <span class="comment"># &#123;&#x27;a&#x27;: 1, 2: &#x27;b&#x27;&#125;</span></span><br><span class="line">d3 = <span class="built_in">dict</span>([(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>)])  <span class="comment"># &#123;&#x27;a&#x27;: 1, 2: &#x27;b&#x27;&#125;</span></span><br><span class="line">d4 = &#123;k:v <span class="keyword">for</span> k,v <span class="keyword">in</span> d3.items()&#125; <span class="comment"># &#123;&#x27;a&#x27;: 1, 2: &#x27;b&#x27;&#125;</span></span><br><span class="line">d5 = <span class="built_in">dict</span>(a=<span class="number">1</span>)                   <span class="comment"># &#123;&#x27;a&#x27;: 1&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># access</span></span><br><span class="line"><span class="built_in">print</span>(d1[<span class="string">&#x27;a&#x27;</span>], d1[<span class="number">2</span>], d1.get(<span class="string">&#x27;c&#x27;</span>))  <span class="comment"># 1 b [3, 4, 5]</span></span><br><span class="line"><span class="built_in">print</span>(d1.get(<span class="string">&#x27;z&#x27;</span>))                  <span class="comment"># None (key not exist)</span></span><br><span class="line"><span class="built_in">print</span>(d1.get(<span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;default&#x27;</span>))       <span class="comment"># default (default value when key not exist)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># append</span></span><br><span class="line">d2[<span class="string">&#x27;c&#x27;</span>] = <span class="number">3</span></span><br><span class="line">d3.update(&#123;<span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(d2, d3, sep=os.linesep)</span><br><span class="line"></span><br><span class="line"><span class="comment"># update</span></span><br><span class="line">d2[<span class="string">&#x27;a&#x27;</span>] = <span class="number">11</span></span><br><span class="line">d3.update(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">11</span>&#125;)    <span class="comment"># return None</span></span><br><span class="line"><span class="built_in">print</span>(d2, d3, sep=os.linesep)</span><br><span class="line"></span><br><span class="line"><span class="comment"># remove</span></span><br><span class="line">d1.clear(); <span class="built_in">print</span>(d1)   <span class="comment"># &#123;&#125;</span></span><br><span class="line"><span class="keyword">del</span> d2[<span class="string">&#x27;a&#x27;</span>]; <span class="built_in">print</span>(d2)  <span class="comment"># &#123;2: &#x27;b&#x27;, &#x27;c&#x27;: 3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(d3.pop(<span class="string">&#x27;a&#x27;</span>), d3)  <span class="comment"># 11 &#123;2: &#x27;b&#x27;, &#x27;c&#x27;: 3&#125;</span></span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> <span class="built_in">list</span>(d3.items()): <span class="comment"># iterate in list</span></span><br><span class="line">    <span class="keyword">if</span> key == <span class="number">2</span> <span class="keyword">or</span> key == <span class="string">&#x27;c&#x27;</span>:</span><br><span class="line">        d3.pop(key)     <span class="comment"># remove multi-key from dict</span></span><br><span class="line"><span class="built_in">print</span>(d3)               <span class="comment"># &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># iterate</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> d2:</span><br><span class="line">    <span class="built_in">print</span>(key)</span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> d2.values():</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> d2.items():</span><br><span class="line">    <span class="built_in">print</span>(k, <span class="string">&#x27;:&#x27;</span>, v)</span><br><span class="line"></span><br><span class="line"><span class="comment"># truth</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> d3) <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span> <span class="keyword">in</span> d3)       <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># copy</span></span><br><span class="line">D = &#123;<span class="number">1</span>: <span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line">E = <span class="built_in">dict</span>(D); E[<span class="number">1</span>] = <span class="string">&#x27;aa&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(D, E) <span class="comment"># &#123;1: &#x27;a&#x27;&#125; &#123;1: &#x27;aa&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># convert to list</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(&#123;<span class="number">1</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>&#125;.items()))  <span class="comment"># [(1, &#x27;a&#x27;), (2, &#x27;b&#x27;)]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sort</span></span><br><span class="line">D = &#123;<span class="number">3</span>: <span class="string">&quot;c&quot;</span>, <span class="number">1</span>: <span class="string">&quot;a&quot;</span>, <span class="number">2</span>: <span class="string">&quot;b&quot;</span>&#125;</span><br><span class="line">S = <span class="built_in">sorted</span>(D.items(), key=<span class="keyword">lambda</span> item : item[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(D, S) <span class="comment"># &#123;3: &#x27;c&#x27;, 1: &#x27;a&#x27;, 2: &#x27;b&#x27;&#125; [(1, &#x27;a&#x27;), (2, &#x27;b&#x27;), (3, &#x27;c&#x27;)]</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="dictionary-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(*d.keys(), *d.values()) <span class="comment"># a b c 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># access partial value</span></span><br><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"><span class="built_in">print</span>(itemgetter(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>)(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;)) <span class="comment"># (1, 3)</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="dictionary-3"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, **dict_data</span>):</span><br><span class="line">        self.__dict__ = dict_data  <span class="comment"># &#123;key: value&#125; to self.key = value</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">getattr</span>(self, item) <span class="comment"># self[item] to self.item</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(**&#123;<span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;)</span><br><span class="line">        <span class="built_in">print</span>(self.b)    <span class="comment"># 2</span></span><br><span class="line">        <span class="built_in">print</span>(self[<span class="string">&#x27;c&#x27;</span>]) <span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(B())</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="dictionary-4"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x = <span class="built_in">dict</span>(<span class="params"></span>)</span>):</span><br><span class="line">        self.x = x</span><br><span class="line"></span><br><span class="line">m = A()</span><br><span class="line">n = A()</span><br><span class="line">n.x.update(&#123;<span class="number">1</span>: <span class="string">&#x27;o&#x27;</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(m.x) <span class="comment"># &#123;1: &#x27;o&#x27;&#125; it&#x27;s terriable!</span></span><br><span class="line"><span class="built_in">print</span>(n.x) <span class="comment"># &#123;1: &#x27;o&#x27;&#125;</span></span><br></pre></td></tr></table></figure></div></div></div>

<h2 id="特殊方法"><a href="#特殊方法" class="headerlink" title="特殊方法"></a>特殊方法</h2><h3 id="str"><a href="#str" class="headerlink" title="__str__"></a><code>__str__</code></h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/reference/datamodel.html">object.<strong>str</strong>(self)</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, color, mileage</span>):</span><br><span class="line">        self.color = color</span><br><span class="line">        self.mileage = mileage</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;a &#123;self.color&#125; car&#x27;</span>.<span class="built_in">format</span>(self=self)</span><br><span class="line"></span><br><span class="line">car = Car(<span class="string">&#x27;red&#x27;</span>, <span class="number">12345</span>)</span><br><span class="line"><span class="built_in">print</span>(car) <span class="comment"># a red car</span></span><br></pre></td></tr></table></figure>

<h3 id="iter"><a href="#iter" class="headerlink" title="__iter__"></a><code>__iter__</code></h3><div class="tabs" id="class_method_iter"><ul class="nav-tabs"><li class="tab active"><a href="#class_method_iter-1">basic</a></li><li class="tab"><a href="#class_method_iter-2">object2str</a></li></ul><div class="tab-content"><div class="tab-pane active" id="class_method_iter-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.a = <span class="string">&quot;1&quot;</span></span><br><span class="line">        self.b = <span class="string">&quot;2&quot;</span></span><br><span class="line">        self.c = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> k, v <span class="keyword">in</span> self.__dict__.items():</span><br><span class="line">            <span class="keyword">yield</span> k, v</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>(A())) <span class="comment"># &#123;&#x27;a&#x27;: &#x27;1&#x27;, &#x27;b&#x27;: &#x27;2&#x27;, &#x27;c&#x27;: 3&#125;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="class_method_iter-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    IGNORE_KEYS = []</span><br><span class="line">    TO_STR_KEYS = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> copy.deepcopy(self.__dict__).items():</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> value:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> key <span class="keyword">in</span> self.IGNORE_KEYS:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> key <span class="keyword">in</span> self.TO_STR_KEYS:</span><br><span class="line">                value = <span class="built_in">str</span>(value)</span><br><span class="line"></span><br><span class="line">            new_value = value</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(value, A):</span><br><span class="line">                new_value = <span class="built_in">dict</span>(value)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(value, <span class="built_in">dict</span>):</span><br><span class="line">                <span class="keyword">for</span> key2, value2 <span class="keyword">in</span> value.items():</span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">isinstance</span>(value2, A):</span><br><span class="line">                        new_value[key2] = <span class="built_in">dict</span>(value2)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        new_value[key2] = value2</span><br><span class="line">            <span class="keyword">yield</span> key, new_value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>(<span class="built_in">dict</span>(self))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    IGNORE_KEYS = [<span class="string">&quot;n&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.m = <span class="number">1</span></span><br><span class="line">        self.n = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(B())  <span class="comment"># &#123;&#x27;m&#x27;: 1&#125;</span></span><br></pre></td></tr></table></figure></div></div></div>

<h2 id="Build-in-Functions"><a href="#Build-in-Functions" class="headerlink" title="Build-in Functions"></a>Build-in Functions</h2><h3 id="enumerate"><a href="#enumerate" class="headerlink" title="enumerate()"></a>enumerate()</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/functions.html#enumerate">enumerate(iterable, start&#x3D;0)</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">enumerate</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]))                 <span class="comment"># &lt;enumerate object at 0x7faf6a418a80&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">enumerate</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])))           <span class="comment"># [(0, &#x27;a&#x27;), (1, &#x27;b&#x27;)]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">enumerate</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>], start=<span class="number">1</span>)))  <span class="comment"># [(1, &#x27;a&#x27;), (2, &#x27;b&#x27;)]</span></span><br><span class="line"><span class="keyword">for</span> i, value <span class="keyword">in</span> <span class="built_in">enumerate</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]):       <span class="comment"># 0 a 1 b</span></span><br><span class="line">    <span class="built_in">print</span>(i, value)</span><br></pre></td></tr></table></figure>

<h3 id="isinstance"><a href="#isinstance" class="headerlink" title="isinstance()"></a>isinstance()</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/functions.html#isinstance">isinstance(object, classinfo)</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="literal">True</span>, <span class="built_in">bool</span>)) <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="number">1</span>, <span class="built_in">bool</span>))    <span class="comment"># False</span></span><br></pre></td></tr></table></figure>

<h3 id="len"><a href="#len" class="headerlink" title="len()"></a>len()</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/functions.html#len">len(s)</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">len</span>(<span class="literal">None</span>)   <span class="comment">#TypeError: object of type &#x27;NoneType&#x27; has no len()</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(<span class="string">&quot;abc&quot;</span>))              <span class="comment"># 3</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]))    <span class="comment"># 3</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(&#123;<span class="number">11</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">22</span>: <span class="string">&#x27;b&#x27;</span>&#125;)) <span class="comment"># 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>([&#123;<span class="number">1</span>,<span class="number">2</span>&#125;, <span class="number">3</span>]))         <span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<h3 id="sum"><a href="#sum" class="headerlink" title="sum()"></a>sum()</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/functions.html#sum">sum(iterable, start&#x3D;0)</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))      <span class="comment"># 6</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">100</span>)) <span class="comment"># 106</span></span><br></pre></td></tr></table></figure>

<h3 id="zip"><a href="#zip" class="headerlink" title="zip()"></a>zip()</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/functions.html#vars">zip(*iterables, strict&#x3D;False)</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">zip</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]):</span><br><span class="line">    <span class="built_in">print</span>(item) <span class="comment"># (1, &#x27;a&#x27;) (2, &#x27;b&#x27;) (3, &#x27;c&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>(<span class="built_in">zip</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])))  <span class="comment"># &#123;1: &#x27;a&#x27;, 2: &#x27;b&#x27;, 3: &#x27;c&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="Scope-of-Variables"><a href="#Scope-of-Variables" class="headerlink" title="Scope of Variables"></a>Scope of Variables</h2><ul>
<li>LEGB rule (优先级从上到下依次递减):<ul>
<li>local：函数内定义的变量，作用域在函数内部；</li>
<li>enclosing：在嵌套函数中，当前函数中声明的变量，在内部函数中依然是可见的，反之不行。<ul>
<li><strong>在内部函数中修改外部函数定义的变量时，需使用<code>nonlocal</code>关键字，否则内部函数会新建同名的local变量。</strong></li>
</ul>
</li>
<li>global: 在函数外定义的变量，作用域在整个程序内可见。<ul>
<li><strong>在函数内修改global变量时，需使用<code>global</code>关键字，否则函数会新建同名的local变量。</strong></li>
</ul>
</li>
<li>built-in: 关键字，在所有地方均可见。<br><strong>NOTE</strong>: python中没有块级作用域，因此代码块中的local变量在当前函数内都是可见的。</li>
</ul>
</li>
</ul>
<div class="tabs" id="scope_of_variables"><ul class="nav-tabs"><li class="tab active"><a href="#scope_of_variables-1">local</a></li><li class="tab"><a href="#scope_of_variables-2">enclosing</a></li><li class="tab"><a href="#scope_of_variables-3">global</a></li><li class="tab"><a href="#scope_of_variables-4">accessSpeed</a></li><li class="tab"><a href="#scope_of_variables-5">inherit</a></li></ul><div class="tab-content"><div class="tab-pane active" id="scope_of_variables-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_number</span>():</span><br><span class="line">    first_num = <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;The first number defined is: &quot;</span>, first_num)</span><br><span class="line"></span><br><span class="line">print_number()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The first number defined is: &quot;</span>, first_num) <span class="comment"># NameError: name &#x27;first_num&#x27; is not defined</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="scope_of_variables-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    first_num = <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> first_num</span><br><span class="line">        first_num = <span class="number">0</span></span><br><span class="line">        second_num = <span class="number">2</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        Outer&#x27;s variables have a larger scope and can be accessed from the enclosed function inner()</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;first_num from outer: &quot;</span>, first_num)    <span class="comment"># 0</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;second_num from inner: &quot;</span>, second_num)  <span class="comment"># 2</span></span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;first_num at outer: &quot;</span>, first_num)     <span class="comment"># 0</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;second_num from inner: &quot;</span>, second_num) <span class="comment"># NameError: name &#x27;second_num&#x27; is not defined</span></span><br><span class="line"></span><br><span class="line">outer()</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="scope_of_variables-3"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">greeting = <span class="string">&quot;Hello&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greeting_world</span>():</span><br><span class="line">    world = <span class="string">&quot;World&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(greeting, world)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greeting_name</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(greeting, name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">change_greeting</span>(<span class="params">new_greeting</span>):</span><br><span class="line">    <span class="keyword">global</span> greeting</span><br><span class="line">    greeting = new_greeting</span><br><span class="line"></span><br><span class="line">greeting_world()          <span class="comment"># Hello World</span></span><br><span class="line">greeting_name(<span class="string">&quot;Samuel&quot;</span>)   <span class="comment"># Hello Samuel</span></span><br><span class="line"></span><br><span class="line">change_greeting(<span class="string">&quot;Hi&quot;</span>)</span><br><span class="line">greeting_world()          <span class="comment"># Hi World</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="scope_of_variables-4"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"></span><br><span class="line">setup=<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">XGLOBAL= 5</span></span><br><span class="line"><span class="string">class A:</span></span><br><span class="line"><span class="string">    xclass = 5</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.xinstance = 5</span></span><br><span class="line"><span class="string">    def f1(self):</span></span><br><span class="line"><span class="string">        xlocal = 5</span></span><br><span class="line"><span class="string">        x = self.xinstance  # instance variable</span></span><br><span class="line"><span class="string">    def f2(self):</span></span><br><span class="line"><span class="string">        xlocal = 5</span></span><br><span class="line"><span class="string">        x = A.xclass        # class variable</span></span><br><span class="line"><span class="string">    def f3(self):</span></span><br><span class="line"><span class="string">        xlocal = 5</span></span><br><span class="line"><span class="string">        x = XGLOBAL         # module variable</span></span><br><span class="line"><span class="string">    def f4(self):</span></span><br><span class="line"><span class="string">        xlocal = 5</span></span><br><span class="line"><span class="string">        x = xlocal          # local variable</span></span><br><span class="line"><span class="string">a = A()</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;access via instance variable: %.3f&#x27;</span> % timeit.timeit(<span class="string">&#x27;a.f1()&#x27;</span>, setup=setup, number=<span class="number">300000000</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;access via class variable: %.3f&#x27;</span> % timeit.timeit(<span class="string">&#x27;a.f2()&#x27;</span>, setup=setup, number=<span class="number">300000000</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;access via module variable: %.3f&#x27;</span> % timeit.timeit(<span class="string">&#x27;a.f3()&#x27;</span>, setup=setup, number=<span class="number">300000000</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;access via local variable: %.3f&#x27;</span> % timeit.timeit(<span class="string">&#x27;a.f4()&#x27;</span>, setup=setup, number=<span class="number">300000000</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;[Output]</span></span><br><span class="line"><span class="string">access via instance variable: 27.857</span></span><br><span class="line"><span class="string">access via class variable: 27.019</span></span><br><span class="line"><span class="string">access via module variable: 23.345</span></span><br><span class="line"><span class="string">access via local variable: 22.284</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="scope_of_variables-5"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">G = <span class="number">1</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    X = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.m = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;G=&#125;</span> <span class="subst">&#123;A.X=&#125;</span> <span class="subst">&#123;self.X=&#125;</span> <span class="subst">&#123;self.m=&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    X = <span class="number">20</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.m = <span class="number">30</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A.X适合读写场景，self.X只适合只读场景</span></span><br><span class="line"><span class="built_in">print</span>(A()) <span class="comment"># G=1 A.X=2 self.X=2 self.m=3</span></span><br><span class="line"><span class="built_in">print</span>(B()) <span class="comment"># G=1 A.X=2 self.X=20 self.m=30</span></span><br></pre></td></tr></table></figure></div></div></div>

<h2 id="Method-resolution-order-MRO"><a href="#Method-resolution-order-MRO" class="headerlink" title="Method resolution order (MRO)"></a>Method resolution order (MRO)</h2><p><a target="_blank" rel="noopener" href="https://realpython.com/python-super">Supercharge Your Classes With Python super()</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/8972866/correct-way-to-use-super-argument-passing">correct way to use super (argument passing)</a></p>
<ul>
<li><code>super()</code>返回父类的临时对象，允许通过它调用父类方法</li>
<li>MRO是指编程语言支持多重继承时解析方法或属性的顺序的一种算法</li>
<li>Python2算法：depth-first left to right algorithm (DLR)</li>
<li>Python3算法：<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/C3_linearization">C3 Linearization algorithm</a></li>
<li>类属性访问顺序（优先级依次递减）：<ol>
<li>instance attribute</li>
<li>class attribute</li>
<li>base class as determined by MRO</li>
</ol>
</li>
</ul>
<div class="tabs" id="mro"><ul class="nav-tabs"><li class="tab active"><a href="#mro-1">MRO</a></li><li class="tab"><a href="#mro-2">super</a></li></ul><div class="tab-content"><div class="tab-pane active" id="mro-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;[Diamond inheritance]</span></span><br><span class="line"><span class="string">      A</span></span><br><span class="line"><span class="string">     / \ </span></span><br><span class="line"><span class="string">    B   C</span></span><br><span class="line"><span class="string">     \ /</span></span><br><span class="line"><span class="string">      D</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">rk</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;In class A&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">rk</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;In class B&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">rk</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;In class C&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span>(B, C):</span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(D.__mro__) <span class="comment"># (&lt;class &#x27;__main__.D&#x27;&gt;, &lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;__main__.C&#x27;&gt;, &lt;class &#x27;__main__.A&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)</span></span><br><span class="line"><span class="built_in">print</span>(D.mro())   <span class="comment"># [&lt;class &#x27;__main__.D&#x27;&gt;, &lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;__main__.C&#x27;&gt;, &lt;class &#x27;__main__.A&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;]</span></span><br><span class="line">d = D()</span><br><span class="line">d.rk()   <span class="comment"># In class B</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="mro-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">First</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;First&quot;</span>, kwargs)  <span class="comment"># First &#123;&#x27;a&#x27;: 1&#125;</span></span><br><span class="line">        self.a = kwargs.pop(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">        <span class="built_in">super</span>(First, self).__init__(**kwargs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Second</span>(<span class="title class_ inherited__">First</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Second&quot;</span>, kwargs) <span class="comment"># Second &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2&#125;</span></span><br><span class="line">        self.b = kwargs.pop(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">        <span class="built_in">super</span>(Second, self).__init__(**kwargs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Third</span>(<span class="title class_ inherited__">Second</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Third&quot;</span>, kwargs)  <span class="comment"># Third &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;</span></span><br><span class="line">        self.c = kwargs.pop(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">        <span class="built_in">super</span>(Third, self).__init__(**kwargs)</span><br><span class="line"></span><br><span class="line">third = Third(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br></pre></td></tr></table></figure></div></div></div>

<h2 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h2><ul>
<li>Python不支持像C++&#x2F;Java中的<code>private</code>变量，暴露类成员变量并不是坏事；</li>
<li>通过<code>@property</code>修饰符可以在不改变现有代码的基础上，封装新的成员变量；</li>
<li>类中<code>_</code>开头的方法或变量，暗指不是类的public api，实际依然可以用，但不保证兼容性；</li>
<li>类中<code>__</code>开头的变量是”class local”，避免被子类重写，运行时会自动混淆名称，例如：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.__foobar = <span class="literal">None</span> <span class="comment"># will be automatically mangled to self._A__foobar</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.__foobar = <span class="number">1</span> <span class="comment"># will be automatically mangled to self._B__foobar</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h2><h3 id="positional-vs-keyword"><a href="#positional-vs-keyword" class="headerlink" title="positional vs keyword"></a>positional vs keyword</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/tutorial/controlflow.html#special-parameters">Functions - Special parameters</a></p>
<ul>
<li><code>/</code>（可选）之前的参数必须是位置参数（Positional）</li>
<li><code>*</code>（可选）之后的参数必须是关键字参数（keyword）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">pos1, pos2, /, pos_or_kwd, *, kwd1, kwd2</span>):</span><br><span class="line">      -----------    ----------     ----------</span><br><span class="line">        |             |                  |</span><br><span class="line">        |        Positional <span class="keyword">or</span> keyword   |</span><br><span class="line">        |                                - Keyword only</span><br><span class="line">         -- Positional only</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">standard_arg</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="built_in">print</span>(arg)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pos_only_arg</span>(<span class="params">arg, /</span>):</span><br><span class="line">    <span class="built_in">print</span>(arg)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">kwd_only_arg</span>(<span class="params">*, arg</span>):</span><br><span class="line">    <span class="built_in">print</span>(arg)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">combined_arg</span>(<span class="params">pos_only, /, standard, *, kwd_only</span>):</span><br><span class="line">    <span class="built_in">print</span>(pos_only, standard, kwd_only)</span><br><span class="line"></span><br><span class="line">standard_arg(<span class="number">1</span>)       <span class="comment"># 1</span></span><br><span class="line">standard_arg(arg=<span class="number">1</span>)   <span class="comment"># 1</span></span><br><span class="line">pos_only_arg(<span class="number">2</span>)       <span class="comment"># 2</span></span><br><span class="line">pos_only_arg(arg=<span class="number">2</span>)   <span class="comment"># TypeError: pos_only_arg() got some positional-only arguments passed as keyword arguments: &#x27;arg&#x27;</span></span><br><span class="line">kwd_only_arg(<span class="number">3</span>)       <span class="comment"># TypeError: kwd_only_arg() takes 0 positional arguments but 1 was given</span></span><br><span class="line">kwd_only_arg(arg=<span class="number">3</span>)   <span class="comment"># 3</span></span><br><span class="line">combined_arg(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)                            <span class="comment"># TypeError: combined_arg() takes 2 positional arguments but 3 were given</span></span><br><span class="line">combined_arg(<span class="number">1</span>, <span class="number">2</span>, kwd_only=<span class="number">3</span>)                   <span class="comment"># 1 2 3</span></span><br><span class="line">combined_arg(<span class="number">1</span>, standard=<span class="number">2</span>, kwd_only=<span class="number">3</span>)          <span class="comment"># 1 2 3</span></span><br><span class="line">combined_arg(pos_only=<span class="number">1</span>, standard=<span class="number">2</span>, kwd_only=<span class="number">3</span>) <span class="comment"># TypeError: combined_arg() got some positional-only arguments passed as keyword arguments: &#x27;pos_only&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo1</span>(<span class="params">name, **kwds</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> kwds)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo2</span>(<span class="params">name, /, **kwds</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> kwds)</span><br><span class="line"></span><br><span class="line">foo1(<span class="number">1</span>, **&#123;<span class="string">&#x27;name&#x27;</span>: <span class="number">2</span>&#125;)   <span class="comment"># TypeError: foo() got multiple values for argument &#x27;name&#x27;</span></span><br><span class="line">foo2(<span class="number">1</span>, **&#123;<span class="string">&#x27;name&#x27;</span>: <span class="number">2</span>&#125;)   <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo3</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b) <span class="comment"># 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo4</span>(<span class="params">a, **kwds</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, kwds) <span class="comment"># 1 &#123;&#x27;c&#x27;: 3, &#x27;b&#x27;: 2&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(foo3(**&#123;<span class="string">&quot;a&quot;</span>: <span class="number">1</span>, <span class="string">&quot;b&quot;</span>: <span class="number">2</span>&#125;))      <span class="comment"># None</span></span><br><span class="line"><span class="built_in">print</span>(foo4(c=<span class="number">3</span>, **&#123;<span class="string">&quot;a&quot;</span>: <span class="number">1</span>, <span class="string">&quot;b&quot;</span>: <span class="number">2</span>&#125;)) <span class="comment"># None</span></span><br></pre></td></tr></table></figure>

<h3 id="argument-vs-parameter"><a href="#argument-vs-parameter" class="headerlink" title="argument vs parameter"></a>argument vs parameter</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/reference/expressions.html#calls">Expressions - Primaries - calls</a></p>
<ul>
<li>argument: 实际参数，支持尾逗号、可变参数、默认参数<ul>
<li>positional argument 位置参数<ul>
<li><code>*expression</code>表示表达式作为iterable对象解析成附加的positional argument</li>
<li><code>*expression</code>附加参数优先于keyword argument（无论表达式处于参数首部或尾部）</li>
</ul>
</li>
<li>keyword argument 关键字参数<ul>
<li><code>**expression</code>表示表达式作为mapping对象解析成附加的keyword argument</li>
</ul>
</li>
</ul>
</li>
<li>formal parameter 形式参数<ul>
<li><code>*identifier</code>表示接受一个包含多余positional argument的tuple</li>
<li><code>**identifier</code>表示接受一个包含多余keyword argument的dict</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">a, b, *c, **d</span>):         <span class="comment"># (parameter, ..., *identifier , **identifier )</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(c), <span class="built_in">type</span>(d))   <span class="comment"># &lt;class &#x27;tuple&#x27;&gt; &lt;class &#x27;dict&#x27;&gt;</span></span><br><span class="line">    <span class="built_in">print</span>(a, b, c, d)</span><br><span class="line"></span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>)          <span class="comment"># 1 2 () &#123;&#125;     (positional, positional)</span></span><br><span class="line"><span class="comment">#f(a=1, *(2,))   # TypeError: f() got multiple values for argument &#x27;a&#x27;</span></span><br><span class="line">f(b=<span class="number">1</span>, *(<span class="number">2</span>,))    <span class="comment"># 2 1 () &#123;&#125;     (keyword, *expression)</span></span><br><span class="line">f(<span class="number">1</span>, *(<span class="number">2</span>,))      <span class="comment"># 1 2 () &#123;&#125;     (positional, *expression)</span></span><br><span class="line">f(<span class="number">1</span>, *(<span class="number">2</span>,<span class="number">3</span>))     <span class="comment"># 1 2 (3,) &#123;&#125;   (positional, *expression)</span></span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)       <span class="comment"># 1 2 (3,) &#123;&#125;   (positional, *expression)</span></span><br><span class="line">f(<span class="number">1</span>, *(<span class="number">2</span>,<span class="number">3</span>), **&#123;<span class="string">&#x27;x&#x27;</span>:<span class="number">4</span>,&#125;)  <span class="comment"># 1 2 (3,) &#123;&#x27;x&#x27;: 4&#125; (positional, *expression, **expression)</span></span><br><span class="line">f(**&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;)  <span class="comment"># 1 2 () &#123;&#x27;c&#x27;: 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">*args</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(args), args)</span><br><span class="line"></span><br><span class="line">f2(*(<span class="number">2</span>,)) <span class="comment"># &lt;class &#x27;tuple&#x27;&gt; (2,)    GOOD</span></span><br><span class="line">f2((<span class="number">2</span>,))  <span class="comment"># &lt;class &#x27;tuple&#x27;&gt; ((2,),) BAD</span></span><br></pre></td></tr></table></figure>

<h3 id="default-parameter"><a href="#default-parameter" class="headerlink" title="default parameter"></a>default parameter</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/reference/compound_stmts.html#function-definitions">Compound statements - Function definitions</a></p>
<ul>
<li>default parameter 默认参数<ul>
<li>如果一个参数有默认值，那么向右到<code>*expression</code>表达式之前的所有参数也必须有默认值</li>
<li>默认参数为mutable对象（list、dict）时，如果函数修改了此对象，默认参数的值也随之被修改，因此mutable对象的默认参数常用None代替</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func_default_list</span>(<span class="params">l=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], v=<span class="number">3</span></span>):   <span class="comment"># Bad</span></span><br><span class="line">    l.append(v)</span><br><span class="line">    <span class="built_in">print</span>(l)</span><br><span class="line"></span><br><span class="line">func_default_list([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], <span class="number">100</span>)  <span class="comment"># [0, 0, 0, 100]</span></span><br><span class="line">func_default_list() <span class="comment"># [0, 1, 2, 3]</span></span><br><span class="line">func_default_list() <span class="comment"># [0, 1, 2, 3, 3]</span></span><br><span class="line">func_default_list() <span class="comment"># [0, 1, 2, 3, 3, 3]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func_default_list_none</span>(<span class="params">l=<span class="literal">None</span>, v=<span class="number">3</span></span>):   <span class="comment"># Good</span></span><br><span class="line">    <span class="keyword">if</span> l <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        l = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">    l.append(v)</span><br><span class="line">    <span class="built_in">print</span>(l)</span><br><span class="line"></span><br><span class="line">func_default_list_none() <span class="comment"># [0, 1, 2, 3]</span></span><br><span class="line">func_default_list_none() <span class="comment"># [0, 1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="lambda-expression"><a href="#lambda-expression" class="headerlink" title="lambda expression"></a>lambda expression</h3><p><a target="_blank" rel="noopener" href="https://realpython.com/python-lambda/">How to Use Python Lambda Functions</a></p>
<ul>
<li>lambda表达式用于代替小的匿名函数，语法上被限制为一个表达式，语义上只是普通函数定义的语法糖。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">make_incrementor</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x: x * n</span><br><span class="line"></span><br><span class="line">f = make_incrementor(<span class="number">11</span>)</span><br><span class="line"><span class="built_in">print</span>(f(<span class="number">1</span>), f(<span class="number">2</span>), f(<span class="number">3</span>))  <span class="comment"># 11 22 33</span></span><br><span class="line"></span><br><span class="line">L = [(<span class="number">4</span>, <span class="string">&#x27;d&#x27;</span>), (<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>), (<span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>), (<span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>)]</span><br><span class="line">L.sort(key=<span class="keyword">lambda</span> pair: pair[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(L)  <span class="comment"># [(1, &#x27;a&#x27;), (2, &#x27;b&#x27;), (3, &#x27;c&#x27;), (4, &#x27;d&#x27;)]</span></span><br></pre></td></tr></table></figure>

<h3 id="annotations"><a href="#annotations" class="headerlink" title="annotations"></a>annotations</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/tutorial/controlflow.html#function-annotations">Function Annotations</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">a: <span class="built_in">str</span>, b: <span class="built_in">int</span> = <span class="number">123</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="built_in">print</span>(f.__annotations__) <span class="comment"># &#123;&#x27;a&#x27;: &lt;class &#x27;str&#x27;&gt;, &#x27;b&#x27;: &lt;class &#x27;int&#x27;&gt;, &#x27;return&#x27;: &lt;class &#x27;str&#x27;&gt;&#125;</span></span><br><span class="line">    <span class="keyword">return</span> a + <span class="string">&#x27;-&#x27;</span> + <span class="built_in">str</span>(b)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f(<span class="string">&#x27;abc&#x27;</span>))  <span class="comment"># abc-123</span></span><br></pre></td></tr></table></figure>

<h1 id="修饰器（decorator）"><a href="#修饰器（decorator）" class="headerlink" title="修饰器（decorator）"></a>修饰器（decorator）</h1><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/17330160/how-does-the-property-decorator-work-in-python">How does the @property decorator work in Python?</a></p>
<p>对已经定义的函数增加一些额外的功能。</p>
<div class="tabs" id="decorator"><ul class="nav-tabs"><li class="tab active"><a href="#decorator-1">nested_func</a></li><li class="tab"><a href="#decorator-2">decorator_func</a></li><li class="tab"><a href="#decorator-3">decorator_class</a></li></ul><div class="tab-content"><div class="tab-pane active" id="decorator-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">decorator_func</span>(<span class="params">fun</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper_func</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Wrapper function started&quot;</span>)</span><br><span class="line">        fun()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Given function decorated&quot;</span>)</span><br><span class="line">        <span class="comment"># Wrapper function add something to the passed function </span></span><br><span class="line">        <span class="comment"># and decorator returns the wrapper function</span></span><br><span class="line">    <span class="keyword">return</span> wrapper_func</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_bye</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bye!!&quot;</span>)</span><br><span class="line"></span><br><span class="line">say_bye = decorator_func(say_bye)</span><br><span class="line">say_bye()</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="decorator-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">decorator_func</span>(<span class="params">fun</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper_func</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Wrapper function started&quot;</span>)</span><br><span class="line">        fun()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Given function decorated&quot;</span>)</span><br><span class="line">        <span class="comment"># Wrapper function add something to the passed function </span></span><br><span class="line">        <span class="comment"># and decorator returns the wrapper function</span></span><br><span class="line">    <span class="keyword">return</span> wrapper_func</span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator_func</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_bye</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;bye!!&quot;</span>)</span><br><span class="line"></span><br><span class="line">say_bye()</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="decorator-3"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ContextDecorator</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, foo, bar</span>):</span><br><span class="line">        self.foo = foo</span><br><span class="line">        self.bar = bar</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;init&quot;</span>, foo, bar)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, f</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;call&quot;</span>)</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapped_f</span>():</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;about to call&quot;</span>)</span><br><span class="line">            f()</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;done calling&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> wrapped_f</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;enter&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;exit&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># with语句触发 __enter__() 和 __exit__()</span></span><br><span class="line"><span class="keyword">with</span> ContextDecorator(<span class="number">1</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;with&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修饰符等价于 ContextDecorator(3, 4)(sample)，触发__call__()</span></span><br><span class="line"><span class="meta">@ContextDecorator(<span class="params"><span class="number">3</span>, <span class="number">4</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sample</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;sample&quot;</span>)</span><br><span class="line"></span><br><span class="line">sample()</span><br></pre></td></tr></table></figure></div></div></div>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ python nested_func.py | python decorator_func.py</span><br><span class="line">Wrapper function started</span><br><span class="line">bye!!</span><br><span class="line">Given function decorated</span><br><span class="line"></span><br><span class="line">$ python decorator_class.py</span><br><span class="line">init 1 2</span><br><span class="line">enter</span><br><span class="line">with</span><br><span class="line">exit</span><br><span class="line">init 3 4</span><br><span class="line">call</span><br><span class="line">about to call</span><br><span class="line">sample</span><br><span class="line">done calling</span><br></pre></td></tr></table></figure>

<h2 id="staticmethod-vs-classmethod"><a href="#staticmethod-vs-classmethod" class="headerlink" title="@staticmethod vs @classmethod"></a>@staticmethod vs @classmethod</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/136097/difference-between-staticmethod-and-classmethod">Difference between staticmethod and classmethod</a></p>
<ul>
<li>使用场景:<ul>
<li>当方法只适合通过当前对象操作时，用instancemethod；</li>
<li>@classmethod：当方法实现中调用了类中其他的变量或方法时，用来代替构造函数或继承关系中；</li>
<li>@staticmethod：当方法实现中不涉及类的其他部分，只是把功能独立的函数放入类中管理。</li>
</ul>
</li>
<li>第一个参数：<ul>
<li>instancemethod：当前对象自动作为第一个参数传递；</li>
<li>@classmethod: 当前对象的类自动作为第一个参数传递；</li>
<li>@staticmethod: 不会自动传递任何参数。</li>
</ul>
</li>
</ul>
<div class="tabs" id="classmethod_vs_staticmethod"><ul class="nav-tabs"><li class="tab active"><a href="#classmethod_vs_staticmethod-1">accessImpl</a></li><li class="tab"><a href="#classmethod_vs_staticmethod-2">inheritance</a></li><li class="tab"><a href="#classmethod_vs_staticmethod-3">callMethod</a></li></ul><div class="tab-content"><div class="tab-pane active" id="classmethod_vs_staticmethod-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> cos, sin, atan, pi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">frompolar</span>(<span class="params">cls, radius, angle</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        The `cls` argument is the `Point` class itself</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> cls(radius * cos(angle), radius * sin(angle))</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">angle</span>(<span class="params">x, y</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        this could be outside the class, but we put it here just</span></span><br><span class="line"><span class="string">        because we think it is logically related to the class.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> atan(y/x)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1 = Point(<span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line">p2 = Point.frompolar(<span class="number">3</span>, pi/<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">angle = Point.angle(<span class="number">3</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="classmethod_vs_staticmethod-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">use @staticmethod, print_name method should be written twice。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span>:</span><br><span class="line">   _class_name = <span class="string">&quot;Parent&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">   @staticmethod</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">print_name</span>():</span><br><span class="line">       <span class="built_in">print</span>(Parent._class_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span>(<span class="title class_ inherited__">Parent</span>):</span><br><span class="line">   _class_name = <span class="string">&quot;Child&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">   @staticmethod</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">print_name</span>():</span><br><span class="line">       <span class="built_in">print</span>(Child._class_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Parent.print_name()</span><br><span class="line">Child.print_name()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">use @classmethod, it is not required to write print_name method twice.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span>:</span><br><span class="line">    _class_name = <span class="string">&quot;Parent&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">print_name</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(cls._class_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span>(<span class="title class_ inherited__">Parent</span>):</span><br><span class="line">    _class_name = <span class="string">&quot;Child&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Parent.print_name()</span><br><span class="line">Child.print_name()</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="classmethod_vs_staticmethod-3"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.fc()) <span class="comment"># fc</span></span><br><span class="line">        <span class="built_in">print</span>(A.fc())    <span class="comment"># fc</span></span><br><span class="line">        <span class="built_in">print</span>(self.fs()) <span class="comment"># fs</span></span><br><span class="line">        <span class="built_in">print</span>(A.fs())    <span class="comment"># fs</span></span><br><span class="line">        <span class="built_in">print</span>(self.p1)   <span class="comment"># p1</span></span><br><span class="line">        <span class="built_in">print</span>(A.p1)      <span class="comment"># &lt;property object at 0x7f1d866500e0&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fc</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(cls.fs())  <span class="comment"># fs</span></span><br><span class="line">        <span class="built_in">print</span>(cls.p1)    <span class="comment"># &lt;property object at 0x7f1d866500e0&gt;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;fc&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fs</span>():</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;fs&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">p1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;p1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(A()) <span class="comment"># &lt;__main__.A object at 0x7f0bf41482b0&gt;</span></span><br></pre></td></tr></table></figure></div></div></div>

<h2 id="abstractmethod"><a href="#abstractmethod" class="headerlink" title="@abstractmethod"></a>@abstractmethod</h2><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/abc.html">abc — Abstract Base Classes</a></p>
<ul>
<li>abc模块提供了定义抽象基类的基础设施<ul>
<li>子类中必须实现 @abstractmethod 修饰的方法</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, ABCMeta, abstractmethod</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(metaclass=ABCMeta): <span class="comment"># 原始形式</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">ABC</span>):               <span class="comment"># 简化形式，避免metaclass造成困惑</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.m = <span class="number">123</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># (maybe) TypeError: Can&#x27;t instantiate abstract class B with abstract methods f</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.m</span><br><span class="line"></span><br><span class="line">b = B()</span><br><span class="line">b.f() // <span class="number">123</span></span><br></pre></td></tr></table></figure>

<h2 id="property"><a href="#property" class="headerlink" title="@property"></a>@property</h2><ul>
<li>@property是built-in函数，返回一个property对象，其有三个方法getter(),setter(),delete()；</li>
<li>@property在python中用来实现getter&amp;setter功能</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Distance</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, meter</span>):</span><br><span class="line">        self.meter = meter</span><br><span class="line"></span><br><span class="line">d = Distance(<span class="number">1.0</span>)</span><br><span class="line"><span class="built_in">print</span>(d.meter)</span><br><span class="line"><span class="comment"># prints 1.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Distance</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, meter</span>):</span><br><span class="line">        <span class="comment"># Customer request: Distances must be stored in millimeters.</span></span><br><span class="line">        <span class="comment"># Public available internals must be changed.</span></span><br><span class="line">        <span class="comment"># This would break client code in C++.</span></span><br><span class="line">        <span class="comment"># This is why you never expose public variables in C++ or Java.</span></span><br><span class="line">        <span class="comment"># However, this is python.</span></span><br><span class="line">        self.millimeter = meter * <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># In python we have @property to the rescue.</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">meter</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.millimeter *<span class="number">0.001</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @meter.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">meter</span>(<span class="params">self, value</span>):</span><br><span class="line">        self.millimeter = meter * <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">d = Distance(<span class="number">1.0</span>)</span><br><span class="line"><span class="built_in">print</span>(d.meter)</span><br><span class="line"><span class="comment"># prints 1.0</span></span><br></pre></td></tr></table></figure>

<h2 id="contextmanager"><a href="#contextmanager" class="headerlink" title="@contextmanager"></a>@contextmanager</h2><ul>
<li>@contextmanager修饰符配合<code>yield</code>可以方便的实现<code>context managerment protol</code>，在with语句中使用自动管理外部资源;</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_context_manager</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Entering the context...&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&quot;Hello, World!&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Leaving the context...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> hello_context_manager() <span class="keyword">as</span> hello:</span><br><span class="line">    <span class="built_in">print</span>(hello)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Entering the context...</span><br><span class="line">Hello, World!</span><br><span class="line">Leaving the context...</span><br></pre></td></tr></table></figure>

<h1 id="语法结构"><a href="#语法结构" class="headerlink" title="语法结构"></a>语法结构</h1><h2 id="if-…-else"><a href="#if-…-else" class="headerlink" title="if … else"></a>if … else</h2><ul>
<li>python中任何对象都可以用在if或while条件中测试真假值；</li>
<li>Built-in object:<ul>
<li>False:<ul>
<li>None</li>
<li>False</li>
<li>数值为0时：<code>0/0.0/0j/Decimal(0)/...</code></li>
<li>序列或集合为空时：<code>‘’/()/[]/&#123;&#125;/set()/range(0)</code></li>
</ul>
</li>
</ul>
</li>
<li>User-defined object:<ul>
<li>默认为True</li>
<li>定义<code>__bool__()</code>后，由其返回值决定，且优先级高于<code>__len__()</code></li>
<li>定义<code>__len__()</code>后，返回0时为False，否则为True</li>
</ul>
</li>
<li>Boolean操作：<ul>
<li>x and y : 与</li>
<li>x or y  : 或</li>
<li>not x   : 非（优先级低于non-Boolean操作）</li>
</ul>
</li>
<li>Comparison操作：<ul>
<li>x is y     : true指x和y是相同的object’s identity</li>
<li>x is not y : true指x和y不是相同的object’s identity</li>
<li><code>==/!=</code> : <code>__eq__()</code></li>
<li><code>&lt;</code>  : <code>__lt__()</code></li>
<li><code>&lt;=</code> : <code>__le__()</code></li>
<li><code>&gt;</code>  : <code>__gt__()</code></li>
<li><code>&gt;=</code> : <code>__ge__()</code></li>
</ul>
</li>
</ul>
<h2 id="for-…-else"><a href="#for-…-else" class="headerlink" title="for … else"></a>for … else</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/9979970/why-does-python-use-else-after-for-and-while-loops/23748240#23748240">Why does python use ‘else’ after for and while loops?</a></p>
<ul>
<li>else片段只有循环正常结束时才会执行，break语句可以抑制else的执行；</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(?):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">5</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Too big - I&#x27;m giving up!&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Completed successfully&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt; range(6) show:</span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">Too big - I&#x27;m giving up!</span><br><span class="line"></span><br><span class="line">&gt; range(3) show:</span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">Completed successfully</span><br></pre></td></tr></table></figure>

<h2 id="with语句"><a href="#with语句" class="headerlink" title="with语句"></a>with语句</h2><p><a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0343/">PEP 343 – The “with” Statement</a></p>
<ul>
<li>context management protocol: <ul>
<li><code>__enter__()</code>在<code>with</code>语句进入<code>runtime context</code>时被调用</li>
<li><code>__exit__()</code>在执行器离开<code>with</code>代码块时被调用</li>
</ul>
</li>
<li>with语句多用来管理外部资源；</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Enter&quot;</span>) </span><br><span class="line">    <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, <span class="built_in">type</span>, value, trace</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;type: &#123;&#125; | value: &#123;&#125; | trace: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">type</span>,value,trace))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myfunc</span>(<span class="params">msg</span>):</span><br><span class="line">  <span class="keyword">with</span> MyClass() <span class="keyword">as</span> sample:</span><br><span class="line">    <span class="built_in">print</span>(msg)</span><br><span class="line">    <span class="comment"># also works if uncomment this:</span></span><br><span class="line">    <span class="comment"># sys.exit(0) </span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">myfunc(<span class="string">&quot;Hello&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt; return version will show:</span><br><span class="line">Enter</span><br><span class="line">Hello</span><br><span class="line">type: None | value: None | trace: None</span><br><span class="line"></span><br><span class="line">&gt; exit(0) version will show:</span><br><span class="line">Enter</span><br><span class="line">Hello</span><br><span class="line">type: &lt;class &#x27;SystemExit&#x27;&gt; | value: 0 | trace: &lt;traceback object at 0x7faca83a7e00&gt;</span><br></pre></td></tr></table></figure>

<h3 id="async-with语句"><a href="#async-with语句" class="headerlink" title="async with语句"></a>async with语句</h3><ul>
<li>async context managerment:<ul>
<li>定义__aenter__() 和 <strong>aexit</strong>()</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> aiohttp</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AsyncSession</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, url</span>):</span><br><span class="line">        self._url = url</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">__aenter__</span>(<span class="params">self</span>):</span><br><span class="line">        self.session = aiohttp.ClientSession()</span><br><span class="line">        response = <span class="keyword">await</span> self.session.get(self._url)</span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">__aexit__</span>(<span class="params">self, exc_type, exc_value, exc_tb</span>):</span><br><span class="line">        <span class="keyword">await</span> self.session.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">check</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> AsyncSession(url) <span class="keyword">as</span> response:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;url&#125;</span>: status -&gt; <span class="subst">&#123;response.status&#125;</span>&quot;</span>)</span><br><span class="line">        html = <span class="keyword">await</span> response.text()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;url&#125;</span>: type -&gt; <span class="subst">&#123;html[:<span class="number">17</span>].strip()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">await</span> asyncio.gather(</span><br><span class="line">        check(<span class="string">&quot;https://realpython.com&quot;</span>),</span><br><span class="line">        check(<span class="string">&quot;https://pycoders.com&quot;</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://realpython.com: status -&gt; 200</span><br><span class="line">https://realpython.com: type -&gt; &lt;!doctype html&gt;</span><br><span class="line">https://pycoders.com: status -&gt; 200</span><br><span class="line">https://pycoders.com: type -&gt; &lt;!doctype html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="赋值表达式（Assignment）"><a href="#赋值表达式（Assignment）" class="headerlink" title="赋值表达式（Assignment）"></a>赋值表达式（Assignment）</h2><ul>
<li>python3.8+引入<code>:=</code>语法为变量赋值，作为larger表达式的一部分使用</li>
<li>语法形状像海象的眼睛和牙齿，因此也叫”walrus operator”</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (n := <span class="built_in">len</span>(a)) &gt; <span class="number">10</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;List is too long (<span class="subst">&#123;n&#125;</span> elements, expected &lt;= 10)&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="match语句"><a href="#match语句" class="headerlink" title="match语句"></a>match语句</h2><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/tutorial/controlflow.html#match-statements">controlflow-match-statements</a></p>
<ul>
<li>python3.10+支持match语句（类似于c++&#x2F;javascript中的switch语句）</li>
<li>match语句支持解包（unpacking），可用于绑定变量</li>
</ul>
<div class="tabs" id="match-statement"><ul class="nav-tabs"><li class="tab active"><a href="#match-statement-1">basic</a></li><li class="tab"><a href="#match-statement-2">unpack</a></li><li class="tab"><a href="#match-statement-3">class</a></li><li class="tab"><a href="#match-statement-4">list</a></li><li class="tab"><a href="#match-statement-5">enum</a></li></ul><div class="tab-content"><div class="tab-pane active" id="match-statement-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">desc</span>(<span class="params">status</span>):</span><br><span class="line">    <span class="keyword">match</span> status:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;a&quot;</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;b&quot;</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span> | <span class="number">4</span> | <span class="number">5</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;c&quot;</span></span><br><span class="line">        <span class="keyword">case</span> _:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;x&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(desc(<span class="number">5</span>), desc(<span class="number">10</span>))  <span class="comment"># c x</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="match-statement-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">point</span>(<span class="params">*value</span>):</span><br><span class="line">    <span class="keyword">match</span> value: <span class="comment"># value is an (x, y) tuple</span></span><br><span class="line">        <span class="keyword">case</span> (<span class="number">0</span>, <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Origin&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> (<span class="number">0</span>, y):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Y=<span class="subst">&#123;y&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> (x, <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;X=<span class="subst">&#123;x&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> (x, y):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;X=<span class="subst">&#123;x&#125;</span>, Y=<span class="subst">&#123;y&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> _:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Not a point&quot;</span>)</span><br><span class="line"></span><br><span class="line">point(<span class="number">0</span>, <span class="number">2</span>)  <span class="comment"># Y=2</span></span><br><span class="line">point(<span class="number">1</span>, <span class="number">0</span>)  <span class="comment"># X=1</span></span><br><span class="line">point(<span class="number">1</span>, <span class="number">2</span>)  <span class="comment"># X=1, Y=3</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="match-statement-3"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        self.x, self.y = x, y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        x = self.x <span class="keyword">if</span> <span class="number">0</span> &lt; self.x <span class="keyword">else</span> <span class="string">&#x27;_&#x27;</span></span><br><span class="line">        y = self.y <span class="keyword">if</span> <span class="number">0</span> &lt; self.y <span class="keyword">else</span> <span class="string">&#x27;_&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;(<span class="subst">&#123;x&#125;</span>, <span class="subst">&#123;y&#125;</span>)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">where_is</span>(<span class="params">point</span>):</span><br><span class="line">    <span class="keyword">match</span> point:</span><br><span class="line">        <span class="keyword">case</span> Point(x=<span class="number">0</span>, y=<span class="number">0</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;point&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> Point(x=<span class="number">0</span>, y=b):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;point&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> Point(x=a, y=<span class="number">0</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;point&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> Point(x=a, y=b) <span class="keyword">if</span> a == b:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;point&#125;</span>-if&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> Point():</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;point&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> _:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;NotPoint&quot;</span>)</span><br><span class="line"></span><br><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="number">2</span></span><br><span class="line">where_is(a)            <span class="comment"># NotPoint</span></span><br><span class="line">where_is(Point(a, <span class="number">0</span>))  <span class="comment"># (1, _)</span></span><br><span class="line">where_is(Point(<span class="number">0</span>, b))  <span class="comment"># (_, 2)</span></span><br><span class="line">where_is(Point(a, b))  <span class="comment"># (1, 2)</span></span><br><span class="line">where_is(Point(<span class="number">2</span>, <span class="number">2</span>))  <span class="comment"># (2, 2)-if</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="match-statement-4"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        self.x, self.y = x, y</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">where_is</span>(<span class="params">points</span>):</span><br><span class="line">    <span class="keyword">match</span> points:</span><br><span class="line">        <span class="keyword">case</span> []:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;points&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> [Point(x=<span class="number">0</span>, y=<span class="number">0</span>)]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;points&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> [Point(x=a, y=<span class="number">0</span>), Point(x=<span class="number">0</span>, y=b) <span class="keyword">as</span> p2]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;(<span class="subst">&#123;a&#125;</span>, <span class="subst">&#123;b&#125;</span>)-<span class="subst">&#123;p2.y*<span class="number">2</span>&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> [Point(x=a, y=b)]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;(<span class="subst">&#123;a&#125;</span>, <span class="subst">&#123;b&#125;</span>)&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> _:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;NotPoints&quot;</span>)</span><br><span class="line"></span><br><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="number">2</span></span><br><span class="line">where_is(a)              <span class="comment"># NotPoints</span></span><br><span class="line">where_is([a])            <span class="comment"># NotPoints</span></span><br><span class="line">where_is([])             <span class="comment"># []</span></span><br><span class="line">where_is([Point(a, <span class="number">0</span>)])  <span class="comment"># (1, 0)</span></span><br><span class="line">where_is([Point(<span class="number">0</span>, b)])  <span class="comment"># (0, 2)</span></span><br><span class="line">where_is([Point(a, <span class="number">0</span>), Point(<span class="number">0</span>, b)])  <span class="comment"># (1, 2)-4</span></span><br><span class="line">where_is([Point(a, b)])  <span class="comment"># (1, 2)</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="match-statement-5"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Color</span>(<span class="title class_ inherited__">Enum</span>):</span><br><span class="line">    RED = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">    GREEN = <span class="string">&#x27;green&#x27;</span></span><br><span class="line">    BLUE = <span class="string">&#x27;blue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">color_desc</span>(<span class="params">color</span>):</span><br><span class="line">    <span class="keyword">match</span> color:</span><br><span class="line">        <span class="keyword">case</span> Color.RED:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;I see red!&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> Color.GREEN:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Grass is green&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> Color.BLUE:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;I&#x27;m feeling the blues :(&quot;</span>)</span><br><span class="line"></span><br><span class="line">color_desc(Color(<span class="string">&#x27;red&#x27;</span>))    <span class="comment"># I see red!</span></span><br><span class="line">color_desc(Color(<span class="string">&#x27;green&#x27;</span>))  <span class="comment"># Grass is green</span></span><br></pre></td></tr></table></figure></div></div></div>

<h1 id="模块（module"><a href="#模块（module" class="headerlink" title="模块（module)"></a>模块（module)</h1><ul>
<li>模块对应一个xxx.py文件，通过<code>import</code>导入到其他模块，且<code>import</code>语句可以在任何位置；</li>
<li>每个模块的全局变量相互隔离，其中<code>__name__</code>变量中保存模块名称；</li>
<li><code>from xxx import *</code>导入除<code>_</code>开头的所有名称；</li>
<li>每个模块只会被解释器实例导入一次，可以通过<code>importlib.reload(xxx)</code>重新导入模块；</li>
</ul>
<h2 id="模块搜索路径"><a href="#模块搜索路径" class="headerlink" title="模块搜索路径"></a>模块搜索路径</h2><p><code>import xxx</code>的搜索过程：<br>1.首先搜索built-in模块<br>2.在<code>sys.path</code>列表中搜索xxx.py模块</p>
<ul>
<li>包含xxx.py脚本所在的目录（优先级高）</li>
<li>包含$PYTHONPATH环境变量中的目录</li>
<li>包含包的默认安装目录<code>site-package</code></li>
<li>不支持软链接路径<br>3.<code>dir(xxx)</code>函数返回一个模块中的所有名称的列表<br>4.<code>builtins</code>模块包含所有的内建函数与变量</li>
</ul>
<h2 id="模块缓存目录"><a href="#模块缓存目录" class="headerlink" title="模块缓存目录"></a>模块缓存目录</h2><p>为了加速模块载入过程，每个模块目录下会生成<code>__pycache__</code>目录，存储编译后的模块文件；</p>
<h1 id="包（package）"><a href="#包（package）" class="headerlink" title="包（package）"></a>包（package）</h1><ul>
<li>package是module的集合，当目录下有<code>__init__.py</code>文件时，python认为此目录是package</li>
<li>通过<code>import ppp/mmm</code>从包导入单个模块后，使用时要带包名<code>ppp.mmm.xxx()</code>（不推荐），因此多用<code>from ppp import mmm</code>语法</li>
<li><code>from . import echo</code>和<code>from ..ppp import echo</code>使用相对路径导入时，注意都是相对于<code>__main__</code>主模块而言的</li>
</ul>
<h2 id="init-py"><a href="#init-py" class="headerlink" title="__init__.py"></a><code>__init__.py</code></h2><ul>
<li><code>package_name/__init__.py</code>文件在<code>import package_name</code>时被调用，导入包中对外暴露的数据和接口；<ul>
<li><code>__all__</code>列表可以定义<code>import *</code>语法导入的模块列表</li>
</ul>
</li>
</ul>
<div class="tabs" id="package_init_py"><ul class="nav-tabs"><li class="tab active"><a href="#package_init_py-1">prometheus_client/__init__.py</a></li></ul><div class="tab-content"><div class="tab-pane active" id="package_init_py-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> (</span><br><span class="line">    metrics, metrics_core,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">__all__ = [<span class="string">&#x27;Counter&#x27;</span>, <span class="string">&#x27;Gauge&#x27;</span>, <span class="string">&#x27;Summary&#x27;</span>, <span class="string">&#x27;Histogram&#x27;</span>]</span><br><span class="line"></span><br><span class="line">Counter = metrics.Counter</span><br><span class="line">Gauge = metrics.Gauge</span><br><span class="line">Summary = metrics.Summary</span><br><span class="line">Histogram = metrics.Histogram</span><br></pre></td></tr></table></figure></div></div></div>

<h2 id="main-py"><a href="#main-py" class="headerlink" title="__main__.py"></a><code>__main__.py</code></h2><ul>
<li><code>package_name/__main__.py</code>文件在<code>python -m package_name</code>时被调用；</li>
</ul>
<div class="tabs" id="package_main_py"><ul class="nav-tabs"><li class="tab active"><a href="#package_main_py-1">pytest/__main__.py</a></li></ul><div class="tab-content"><div class="tab-pane active" id="package_main_py-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;The pytest entry point.&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">raise</span> SystemExit(pytest.console_main())</span><br></pre></td></tr></table></figure></div></div></div>

<h2 id="pip工具"><a href="#pip工具" class="headerlink" title="pip工具"></a>pip工具</h2><h3 id="pyproject-toml"><a href="#pyproject-toml" class="headerlink" title="pyproject.toml"></a><code>pyproject.toml</code></h3><ul>
<li><code>package_name/pyproject.toml</code>文件包含构建包时系统要求，被pip程序使用。</li>
</ul>
<h1 id="异常（Exception"><a href="#异常（Exception" class="headerlink" title="异常（Exception)"></a>异常（Exception)</h1><ul>
<li>未捕获的异常导致程序终止</li>
<li>except语句中基类异常可以匹配派生异常</li>
<li>except语句中异常名后面可以通过<code>as</code>指定绑定到异常实例的变量名</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">B</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span>(<span class="title class_ inherited__">C</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">E</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> cls <span class="keyword">in</span> [B, C, D, E]:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">raise</span> cls()</span><br><span class="line">    <span class="keyword">except</span> D <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;<span class="built_in">type</span>(e)=&#125;</span> <span class="subst">&#123;e.args&#125;</span>&quot;</span>) <span class="comment"># type(e)=&lt;class &#x27;__main__.D&#x27;&gt; ()</span></span><br><span class="line">    <span class="keyword">except</span> C:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;C&quot;</span>)                    <span class="comment"># C</span></span><br><span class="line">    <span class="keyword">except</span> B <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">type</span>(e)))  <span class="comment"># &lt;class &#x27;__main__.B&#x27;&gt;</span></span><br><span class="line">    <span class="keyword">except</span> BaseException <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Unexpected <span class="subst">&#123;e=&#125;</span>, <span class="subst">&#123;<span class="built_in">type</span>(e)=&#125;</span>&quot;</span>)  <span class="comment"># TypeError: exceptions must derive from BaseException</span></span><br><span class="line">        <span class="keyword">raise</span>                                  <span class="comment"># 捕获后再次抛出此异常</span></span><br></pre></td></tr></table></figure>

<h2 id="raise…from"><a href="#raise…from" class="headerlink" title="raise…from"></a>raise…from</h2><ul>
<li>在<code>except</code>或<code>finally</code>块中，异常链是隐式自动指定的</li>
<li><code>raise...from</code>语句可以显式指定传播的异常链，常用于异常转换</li>
<li><code>raise...from None</code>语句可以禁用异常链</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">raise</span> ConnectionError</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    func()</span><br><span class="line"><span class="keyword">except</span> ConnectionError <span class="keyword">as</span> exc:</span><br><span class="line">    <span class="keyword">raise</span> RuntimeError(<span class="string">&#x27;Failed to open database&#x27;</span>) <span class="keyword">from</span> exc</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;[Output]</span></span><br><span class="line"><span class="string">Traceback (most recent call last):</span></span><br><span class="line"><span class="string">  File &quot;&lt;stdin&gt;&quot;, line 2, in &lt;module&gt;</span></span><br><span class="line"><span class="string">  File &quot;&lt;stdin&gt;&quot;, line 2, in func</span></span><br><span class="line"><span class="string">ConnectionError</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The above exception was the direct cause of the following exception:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Traceback (most recent call last):</span></span><br><span class="line"><span class="string">  File &quot;&lt;stdin&gt;&quot;, line 4, in &lt;module&gt;</span></span><br><span class="line"><span class="string">RuntimeError: Failed to open database</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="try…except…else"><a href="#try…except…else" class="headerlink" title="try…except…else"></a>try…except…else</h2><ul>
<li>当try块没有引发异常(无论是否被捕获)时，执行else块，否则忽略else块</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> arg <span class="keyword">in</span> sys.argv[<span class="number">1</span>:]:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        f = <span class="built_in">open</span>(arg, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> OSError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;cannot open&#x27;</span>, arg)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(arg, <span class="string">&#x27;has&#x27;</span>, <span class="built_in">len</span>(f.readlines()), <span class="string">&#x27;lines&#x27;</span>)</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure>

<h2 id="try…finally"><a href="#try…finally" class="headerlink" title="try…finally"></a>try…finally</h2><ul>
<li>finally块一定会被执行</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">def divide(x, y):</span><br><span class="line">    try:</span><br><span class="line">        result = x / y</span><br><span class="line">    except ZeroDivisionError:</span><br><span class="line">        print(&quot;division by zero!&quot;)</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;result is&quot;, result)</span><br><span class="line">    finally:</span><br><span class="line">        print(&quot;executing finally clause&quot;)</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;[Output]</span><br><span class="line">&gt;&gt;&gt; divide(2, 1)</span><br><span class="line">result is 2.0</span><br><span class="line">executing finally clause</span><br><span class="line">&gt;&gt;&gt; divide(2, 0)</span><br><span class="line">division by zero!</span><br><span class="line">executing finally clause</span><br><span class="line">&gt;&gt;&gt; divide(&quot;2&quot;, &quot;1&quot;)</span><br><span class="line">executing finally clause</span><br><span class="line">&quot;&quot;&quot;</span><br></pre></td></tr></table></figure>

<h2 id="assert"><a href="#assert" class="headerlink" title="assert"></a>assert</h2><ul>
<li>语法格式：<code>assert condition, error_message(optional)</code></li>
<li>assert失败时抛出<code>AssertionError</code>异常</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">0</span>, <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="keyword">except</span> AssertionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e) <span class="comment"># abc</span></span><br></pre></td></tr></table></figure>

<h1 id="调试（Debugger）"><a href="#调试（Debugger）" class="headerlink" title="调试（Debugger）"></a>调试（Debugger）</h1><h2 id="进入"><a href="#进入" class="headerlink" title="进入"></a>进入</h2><ul>
<li>python3.7+引入内建函数<code>breakpoint()</code>自动使用pdb模块，且可通过<code>PYTHONBREAKPOINT</code>环境变量控制调试器行为。</li>
</ul>
<div class="tabs" id="debugger"><ul class="nav-tabs"><li class="tab active"><a href="#debugger-1">pdb</a></li><li class="tab"><a href="#debugger-2">breakpoint</a></li><li class="tab"><a href="#debugger-3">cmdline</a></li></ul><div class="tab-content"><div class="tab-pane active" id="debugger-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ cat test.py</span><br><span class="line">filename = __file__</span><br><span class="line"><span class="keyword">import</span> pdb; pdb.set_trace()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;path = <span class="subst">&#123;filename&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">$ python test.py</span><br><span class="line">&gt; /opt/python3/sample/test.py(<span class="number">5</span>)&lt;module&gt;()</span><br><span class="line">-&gt; <span class="built_in">print</span>(<span class="string">f&#x27;path = <span class="subst">&#123;filename&#125;</span>&#x27;</span>)</span><br><span class="line">(Pdb) filename</span><br><span class="line"><span class="string">&#x27;test.py&#x27;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="debugger-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ cat test.py</span><br><span class="line">filename = __file__</span><br><span class="line"><span class="built_in">breakpoint</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;path = <span class="subst">&#123;filename&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">$ python test.py</span><br><span class="line">&gt; /opt/python3/sample/test.py(<span class="number">5</span>)&lt;module&gt;()</span><br><span class="line">-&gt; <span class="built_in">print</span>(<span class="string">f&#x27;path = <span class="subst">&#123;filename&#125;</span>&#x27;</span>)</span><br><span class="line">(Pdb) filename</span><br><span class="line"><span class="string">&#x27;test.py&#x27;</span></span><br><span class="line"></span><br><span class="line">$ PYTHONBREAKPOINT=<span class="number">0</span> python test.py</span><br><span class="line">path = test.py</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="debugger-3"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ cat test.py</span><br><span class="line">filename = __file__</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;path = <span class="subst">&#123;filename&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">$ python -m pdb test.py</span><br><span class="line">&gt; /opt/python3/sample/test.py(<span class="number">1</span>)&lt;module&gt;()</span><br><span class="line">-&gt; filename = __file__</span><br><span class="line">(Pdb) <span class="built_in">next</span></span><br><span class="line">&gt; /opt/python3/sample/test.py(<span class="number">2</span>)&lt;module&gt;()</span><br><span class="line">-&gt; <span class="built_in">print</span>(<span class="string">f&#x27;path = <span class="subst">&#123;filename&#125;</span>&#x27;</span>)</span><br><span class="line">(Pdb) p filename</span><br><span class="line"><span class="string">&#x27;test.py&#x27;</span></span><br></pre></td></tr></table></figure></div></div></div>

<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(Pdb) l               (list)列出源码（默认11行，&#x27;.&#x27;参数一直从当前位置开始）</span><br><span class="line">(Pdb) ll              (longlist)列出源码（当前函数或frame）</span><br><span class="line">(Pdb) a               (args)打印参数</span><br><span class="line">(Pdb) p &lt;v1&gt;, &lt;v2&gt;    (p)打印表达式的值</span><br><span class="line">(Pdb) pp &#x27;v1=&#x27; + v1   (pp)打印表达式的值（Pretty-print）</span><br><span class="line">(Pdb) display &lt;v1&gt;    (display)自动打印变量值（当变量值改变时）</span><br><span class="line">(Pdb) undisplay &lt;v1&gt;  (undisplay)取消自动打印变量值（当变量值改变时）</span><br><span class="line">(Pdb) n               (next)执行一行（step over）</span><br><span class="line">(Pdb) s               (step)执行一行（step into）</span><br><span class="line">(Pdb) c               (continue)继续执行（直到遇到断点）</span><br><span class="line">(Pdb) unt             (until)继续执行（直到行号大于当前行，用于跳出循环）</span><br><span class="line">(Pdb) b util:5        (break)设置断点（util.py文件第5行）</span><br><span class="line">(Pdb) b util.get_path (break)设置断点（util模块的get_path函数入口）</span><br><span class="line">(Pdb) b               (break)查看断点（序号Num）</span><br><span class="line">(Pdb) disable 1       (disable)禁用断点（序号Num）</span><br><span class="line">(Pdb) enable 1        (enable)启用断点（序号Num）</span><br><span class="line">(Pdb) cl 1            (clear)删除断点（序号Num）</span><br><span class="line">(Pdb) cl util:5       (clear)删除断点</span><br><span class="line">(Pdb) w               (bt)打印栈回溯（stack trace）</span><br><span class="line">(Pdb) u               (up)向上移动frame（2参数移动2个frame）</span><br><span class="line">(Pdb) d               (down)向下移动frame</span><br><span class="line">(Pdb) h w             (help)打印帮助（w命令）</span><br><span class="line">(Pdb) q               (quit)退出</span><br></pre></td></tr></table></figure>

<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>[1] <a target="_blank" rel="noopener" href="https://docs.python.org/3/tutorial/">The Python Tutorial</a><br>[2] <a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/">Index of Python Enhancement Proposals (PEPs)</a><br>[3] <a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/method-resolution-order-in-python-inheritance/">Method resolution order in Python Inheritance</a><br>[4] <a target="_blank" rel="noopener" href="https://github.com/taizilongxu/interview_python">taizilongxu&#x2F;interview_python</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Media/RTMP.html" rel="prev" title="RTMP协议">
                  <i class="fa fa-chevron-left"></i> RTMP协议
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/ProgrammingLanguage/Python/Unittest.html" rel="next" title="unittest单元测试框架">
                  unittest单元测试框架 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2020 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-burn"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ssyang</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Symbols count total">413k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">6:16</span>
  </span>
</div>
  <div class="powered-by"><a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a>/<a href="https://theme-next.js.org/mist/" class="theme-link" rel="noopener" target="_blank">NexT</a>
  </div>

    </div>
  </footer>

  
  <script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="/lib/jquery/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="/lib/@fancyapps/fancybox/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="/lib/pangu/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  
<script src="/lib/hexo-generator-searchdb/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-ph3Dk89VmuTVXG6x/RDzk53SU9LPdAh1tpv0UvnDZ2I="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-CmZCFVnvol9YL23PfjDflGY5nJwE+Mf/JN+8v+tD/34="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script src="/js/third-party/fancybox.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"/lib/mathjax/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


  <script src="/lib/quicklink/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://blog.imssyang.com/ProgrammingLanguage/Python/Basic.html"}</script>
  <script src="/js/third-party/quicklink.js"></script>
<link rel="stylesheet" href="/lib/disqusjs/dist/disqusjs.css" integrity="sha256-GxdCIOyfxQ1OBfS99qAIJDoGK1ADuBsxhMTqXG82fAY=" crossorigin="anonymous">

<script class="next-config" data-name="disqusjs" type="application/json">{"enable":true,"api":"https://disqus.com/api/","apikey":"9zaN2jW6zXMHxC3NctLnrVsVuNe4yZ8CyZ1rWAJQKcIc7JMaHNPP9m4vra2AJeIA","shortname":"imssyang","js":{"url":"/lib/disqusjs/dist/disqus.js","integrity":"sha256-LVaMHPQ2zLqOc5rXSAfr4d1PIkEGNLyyUTDNPZmTtUw="}}</script>
<script src="/js/third-party/comments/disqusjs.js"></script>

</body>
</html>
